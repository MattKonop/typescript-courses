{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/course/intermediate-v2/03-modules/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Learn TypeScript w/ Mike North","courses":[{"id":"fundamentals-v3","name":"TypeScript Fundamentals v3","summary":"Learn everything you need to know in order to confidently and successfully use TypeScript to build a modern JavaScript app."},{"id":"fundamentals-v4","name":"TypeScript Fundamentals v4","summary":"Learn everything you need to know in order to confidently and successfully use TypeScript to build a modern JavaScript app."},{"id":"intermediate-v1","name":"Intermediate TypeScript","summary":"Leverage TypeScript's strengths to provide clarity in the face of\ncomplexity, while protecting your codebase and team from it's weaknesses.\n"},{"id":"making-typescript-stick","name":"Making TypeScript Stick","summary":"Tackle a series of challenges designed to reinforce your knowledge and make\nthe important concepts truly \"stick\" in your mind.\n"},{"id":"enterprise-v2","name":"Enterprise TypeScript v2","summary":"Combine TypeScript and GraphQL's type systems to create full-stack, fully\ntype-checked code bases that are shockingly easy to refactor and maintain.\n"},{"id":"full-stack-typescript","name":"Full Stack TypeScript","summary":"Combine TypeScript and GraphQL's type systems to create full-stack, fully\ntype-checked code bases that are shockingly easy to refactor and maintain.\n"},{"id":"intermediate-v2","name":"Intermediate TypeScript","summary":"Leverage TypeScript's strengths to provide clarity in the face of\ncomplexity, while protecting your codebase and team from it's weaknesses.\n"}]}},"markdownRemark":{"id":"5c421fde-236e-5fc9-b932-bcfcae9e107a","excerpt":"The JS ecosystem was without an “official” module specification\nuntil 2015, which led to a variety of different community-defined\nmodule types, including…","html":"<p>The JS ecosystem was without an “official” module specification\nuntil 2015, which led to a variety of different community-defined\nmodule types, including…</p>\n<ul>\n<li><a href=\"https://nodejs.org/api/modules.html#modules_modules_commonjs_modules\">CommonJS</a></li>\n<li><a href=\"https://requirejs.org/docs/whyamd.html\">AMD (RequireJS)</a></li>\n<li><a href=\"https://github.com/umdjs/umd\">UMD</a></li>\n</ul>\n<p>AMD and UMD modules are increasingly rare these days, but CommonJS has stuck around, in part\ndue to it still being the default module type for code that runs in Node.js.</p>\n<p>While it’s unusual that we write anything other than “ES modules” these days,\nit’s very common to need to describe the types of older CJS code.</p>\n<h2 id=\"es-module-imports-and-exports\" style=\"position:relative;\"><a href=\"#es-module-imports-and-exports\" aria-label=\"es module imports and exports permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ES Module imports and exports</h2>\n<p>First, let’s get the conventional stuff out of the way:\nTypeScript does exactly what you’re used to seeing in modern JavaScript code.</p>\n<p>Here are some of the basics:</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #6E7781\">// named imports</span></div><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> { strawberry, raspberry } </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">\"./berries\"</span></div><div class='line'></div><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> kiwi </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">\"./kiwi\"</span><span style=\"color: #24292F\"> </span><span style=\"color: #6E7781\">// default import</span></div><div class='line'></div><div class='line'><span style=\"color: #CF222E\">export</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">function</span><span style=\"color: #24292F\"> </span><span style=\"color: #8250DF\">makeFruitSalad</span><span style=\"color: #24292F\">() {} </span><span style=\"color: #6E7781\">// named export</span></div><div class='line'></div><div class='line'><span style=\"color: #CF222E\">export</span><span style=\"color: #953800\"> </span><span style=\"color: #CF222E\">default</span><span style=\"color: #953800\"> </span><span style=\"color: #CF222E\">class</span><span style=\"color: #953800\"> FruitBasket {} </span><span style=\"color: #6E7781\">// default export</span></div><div class='line'></div><div class='line'><span style=\"color: #CF222E\">export</span><span style=\"color: #24292F\"> { lemon, lime } </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">\"./citrus\"</span><span style=\"color: #24292F\"> </span><span style=\"color: #6E7781\">// re-export</span></div><div class='line'><span style=\"color: #CF222E\">export</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">*</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">as</span><span style=\"color: #24292F\"> berries </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">\"./berries\"</span><span style=\"color: #24292F\"> </span><span style=\"color: #6E7781\">// re-export entire module as a single namespace</span></div></code></div></pre>\n<p>Although fairly uncommon in the JS world, <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import#import_an_entire_modules_contents\">it’s possible to import an entire module as a namespace</a>. TypeScript supports this as well</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">*</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">as</span><span style=\"color: #24292F\"> allBerries </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">\"./berries\"</span><span style=\"color: #24292F\"> </span><span style=\"color: #6E7781\">// namespace import</span></div><div class='line'></div><div class='line'><span style=\"color: #24292F\">allBerries.strawberry </span><span style=\"color: #6E7781\">// using the namespace</span></div><div class='line'><span style=\"color: #24292F\">allBerries.blueberry</span></div><div class='line'><span style=\"color: #24292F\">allBerries.raspberry</span></div><div class='line'></div><div class='line'><span style=\"color: #CF222E\">export</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">*</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">\"./berries\"</span><span style=\"color: #24292F\"> </span><span style=\"color: #6E7781\">// namespace re-export</span></div></code></div></pre>\n<h2 id=\"importing-types\" style=\"position:relative;\"><a href=\"#importing-types\" aria-label=\"importing types permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Importing types</h2>\n<h3 id=\"how-typescript-erases-imports-of-types\" style=\"position:relative;\"><a href=\"#how-typescript-erases-imports-of-types\" aria-label=\"how typescript erases imports of types permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How TypeScript erases imports of types</h3>\n<p>If you actually use the TypeScript compiler’s output as the beginning of your build pipeline, you don’t really have to worry about this, because the compiler operates on your whole project holistically, understands exactly what you’re importing and how you’re using it, and can fully “erase” imports that are exclusively for types from your code</p>\n<p>Here’s an example of TypeScript doing this, even with <em>declaration merging</em> in play. The compiler knows that in <code>b.ts</code> we’re importing <code>Foo</code> as a class, but we only end up using it as a type.</p>\n<pre class=\"shiki github-light twoslash lsp\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #6E7781\">// @filename: a.ts</span></div><div class='line'><span style=\"color: #CF222E\">export</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">class</span><span style=\"color: #24292F\"> </span><span style=\"color: #953800\"><data-lsp lsp='class Foo' >Foo</data-lsp></span><span style=\"color: #24292F\"> {}</span></div><div class='line'><span style=\"color: #CF222E\">export</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">function</span><span style=\"color: #24292F\"> </span><span style=\"color: #8250DF\"><data-lsp lsp='function bar(): void' >bar</data-lsp></span><span style=\"color: #24292F\">() {</span></div><div class='line'><span style=\"color: #24292F\">  <data-lsp lsp='var console: Console' >console</data-lsp>.</span><span style=\"color: #8250DF\"><data-lsp lsp='(method) Console.log(...data: any[]): void' >log</data-lsp></span><span style=\"color: #24292F\">(</span><span style=\"color: #0A3069\">\"bar\"</span><span style=\"color: #24292F\">);</span></div><div class='line'><span style=\"color: #24292F\">}</span></div><div class='line'>&nbsp;</div><div class='line'><span style=\"color: #6E7781\">// @filename: b.ts</span></div><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> { <data-lsp lsp='(alias) class Foo&#10;import Foo' >Foo</data-lsp> } </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">&apos;./a&apos;</span></div><div class='line'>&nbsp;</div><div class='line'><span style=\"color: #CF222E\">let</span><span style=\"color: #24292F\"> <data-lsp lsp='let x: Foo' >x</data-lsp></span><span style=\"color: #CF222E\">:</span><span style=\"color: #24292F\"> </span><span style=\"color: #953800\"><data-lsp lsp='(alias) class Foo&#10;import Foo' >Foo</data-lsp></span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> {};</span></div></code><a class='playground-link' href='https://www.typescriptlang.org/play/#code/PTAEAEDMEsBsFMB2BDAtvAXKZA6ALgM4BQ8AHgA4D2ATnqAMazIEGgBilloA3gL4kUadSAFdE9PNEqJQAI2TUAFAEoeRUA2kFKCHLEoBzRQCJ51Y8oDcRfkRAQYCFOiyz8xaKiq0e7TqF5QSGpKVFAAchxgZHCiIgQ6UiwOLgBeHl5LIA'>Try</a></div></pre>\n<p>Here’s the <code>b.js</code> file, the compiled output of <code>b.ts</code></p>\n<pre class=\"shiki github-light twoslash lsp\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #0A3069\">\"use strict\"</span><span style=\"color: #24292F\">;</span></div><div class='line'><span style=\"color: #0550AE\">Object</span><span style=\"color: #24292F\">.</span><span style=\"color: #8250DF\">defineProperty</span><span style=\"color: #24292F\">(</span><span style=\"color: #0550AE\">exports</span><span style=\"color: #24292F\">, </span><span style=\"color: #0A3069\">\"__esModule\"</span><span style=\"color: #24292F\">, { value: </span><span style=\"color: #0550AE\">true</span><span style=\"color: #24292F\"> });</span></div><div class='line'><span style=\"color: #CF222E\">var</span><span style=\"color: #24292F\"> x </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> {};</span></div><div class='line'>&nbsp;</div></code><a class='playground-link' href='https://www.typescriptlang.org/play/#code/PTAEAEGcAsHsHcCiBbAlgFwFAgs2ATAVwBsBTALlAGFZk8A7AKQGVsxx0BDAJwHNT0lRMwCsbCDAQoM6UvgBiqMpQBGAOgBWkceABmS0vU7IKoTmvTbSADwAOsbulABjYp0iRQ82LFABvAF9MG3tHUF1Cemd0VFh6UBUeAAoASn9MUBc4yFgyNWJYXiSAIkTuYpTMIJ19MiMTVQttVGRQpz8vH1AA8O5aUAByNWBOAcxMMidrSm9fAF5-AKA'>Try</a></div></pre>\n<p>And the compiled output after I add one more line <code>const y = new Foo()</code> to the bottom of <code>b.ts</code></p>\n<pre class=\"shiki github-light twoslash lsp\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line dim'><span style=\"color: #0A3069\">\"use strict\"</span><span style=\"color: #24292F\">;</span></div><div class='line dim'><span style=\"color: #0550AE\">Object</span><span style=\"color: #24292F\">.</span><span style=\"color: #8250DF\">defineProperty</span><span style=\"color: #24292F\">(</span><span style=\"color: #0550AE\">exports</span><span style=\"color: #24292F\">, </span><span style=\"color: #0A3069\">\"__esModule\"</span><span style=\"color: #24292F\">, { value: </span><span style=\"color: #0550AE\">true</span><span style=\"color: #24292F\"> });</span></div><div class='line highlight'><span style=\"color: #CF222E\">var</span><span style=\"color: #24292F\"> a_1 </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">require</span><span style=\"color: #24292F\">(</span><span style=\"color: #0A3069\">\"./a\"</span><span style=\"color: #24292F\">);</span></div><div class='line dim'><span style=\"color: #CF222E\">var</span><span style=\"color: #24292F\"> x </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> {};</span></div><div class='line highlight'><span style=\"color: #CF222E\">var</span><span style=\"color: #24292F\"> y </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">new</span><span style=\"color: #24292F\"> a_1.</span><span style=\"color: #8250DF\">Foo</span><span style=\"color: #24292F\">();</span></div><div class='line dim'>&nbsp;</div></code><a class='playground-link' href='https://www.typescriptlang.org/play/#code/PTAEAEGcAsHsHcCiBbAlgFwFAgs2ATAVwBsBTALlAGFZk8A7AKQGVsxx0BDAJwHNT0lRMwCsbCDAQoM6UvgBiqMpQBGAOgBWkceABmS0vU7IKoTmvTbSADwAOsbulABjYp0iRQ82LFABvAF9MG3tHUF1Cemd0VFh6UBUeAAoASn9MUBc4yFgyNWJYXiSAIkTuYpTMIJ19MiMTVQttVGRQpz8vH1AA8O5aUAByNWBOAcxMMidrSm9fAF5-IOdspwBPUAX6UnhO2FSgA'>Try</a></div></pre>\n<p>As we can see, using that constructor caused us to cross a threshold, where we now have to actually import <code>./a</code> at runtime, and invoke that <code>Foo()</code> constructor.</p>\n<h3 id=\"using-other-tools-like-babel-webpack-parcel-and-more\" style=\"position:relative;\"><a href=\"#using-other-tools-like-babel-webpack-parcel-and-more\" aria-label=\"using other tools like babel webpack parcel and more permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using other tools like Babel, Webpack, Parcel and more</h3>\n<p>There are some other tools that can operate on TypeScript files and produce a build output, but they’re subtle in a very important way. Sometimes you may not even know that you’re using one of these tools, because they still perform type-checking with the TypeScript compiler. What they <em>don’t do</em>, is actually have <code>tsc</code> produce the <code>.js</code> files.</p>\n<p><a href=\"https://babeljs.io/\">Babel</a> and tools like it type-check and transpile one module at a time, instead of compiling the entire program at once. This has some advantages when it comes to the simplicity of incremental rebuilds and the ability to scale out the compile work horizontally. These tools often support (or are used with tools that support) dead code elimination (or <a href=\"https://webpack.js.org/guides/tree-shaking/\">“tree shaking”</a>), which attempts to discard non-imported modules from the build.</p>\n<p>However — if you’re compiling one module at a time, there’s no way to be sure that our <code>Foo</code> import is just a type.</p>\n<h3 id=\"type-only-imports\" style=\"position:relative;\"><a href=\"#type-only-imports\" aria-label=\"type only imports permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Type-only imports</h3>\n<p>TypeScript provides an unambiguous way of importing <em>only types</em>. Please pardon the bug which is causing the error to show up on the wrong line</p>\n<pre class=\"shiki github-light twoslash lsp\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line dim'><span style=\"color: #6E7781\">// @filename: a.ts</span></div><div class='line dim'><span style=\"color: #CF222E\">export</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">class</span><span style=\"color: #24292F\"> </span><span style=\"color: #953800\"><data-lsp lsp='class Foo' >Foo</data-lsp></span><span style=\"color: #24292F\"> {}</span></div><div class='line dim'>&nbsp;</div><span class=\"error\"><span>'Foo' cannot be used as a value because it was imported using 'import type'.</span><span class=\"code\">1361</span></span><span class=\"error-behind\">'Foo' cannot be used as a value because it was imported using 'import type'.</span><div class='line dim'><span style=\"color: #6E7781\">// @filename: b.ts</span></div><div class='line highlight'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">type</span><span style=\"color: #24292F\"> { <data-lsp lsp='(alias) class Foo&#10;import Foo' style='border-bottom: solid 2px lightgrey;'>Foo</data-lsp> } </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">&apos;./a&apos;</span></div><div class='meta-line'><span class='popover-prefix'>              </span><span class='popover'><div class='arrow'></div>(alias) class Foo\nimport Foo</span></div><div class='line dim'><span style=\"color: #CF222E\">let</span><span style=\"color: #24292F\"> <data-lsp lsp='let x: Foo' >x</data-lsp></span><span style=\"color: #CF222E\">:</span><span style=\"color: #24292F\"> </span><span style=\"color: #953800\"><data-lsp lsp='(alias) class Foo&#10;import Foo' >Foo</data-lsp></span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> {}</span></div><div class='line dim'><span style=\"color: #CF222E\">new</span><span style=\"color: #24292F\"> </span><span style=\"color: #8250DF\"><data-lsp lsp='(alias) new Foo(): Foo&#10;import Foo' >Foo</data-lsp></span><span style=\"color: #24292F\">()</span></div></code><a class='playground-link' href='https://www.typescriptlang.org/play/#code/PTAEAEFMCdoe2gZwFygIwGYBsaBQIIAzASwBtIA7AQwFtJUqA6AF0V0gA8AHBZ0AY1JVEiUADE4cUAG8AvrnxhwJctTqoARizbEaPaH2YBPLpBnjJoWaELwaoAOSNgVB4tAfPXzwD0A-LjkfByoElIAvDLyFJAA7hZwABQAlEA'>Try</a></div></pre>\n<p>You can use <code>import type</code> and <code>export type</code> fairly broadly, in the same ways you’d use <code>import</code> and <code>export</code> to pass values across module boundaries.</p>\n<h2 id=\"commonjs-interop\" style=\"position:relative;\"><a href=\"#commonjs-interop\" aria-label=\"commonjs interop permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CommonJS Interop</h2>\n<p>Things can sometimes get a bit tricky when consuming CommonJS modules that do things that are incompatible with the way ES Modules typically work.</p>\n<p>Most of the time, you can just convert something like</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">js</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">const</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">fs</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">require</span><span style=\"color: #24292F\">(</span><span style=\"color: #0A3069\">\"fs\"</span><span style=\"color: #24292F\">)</span></div></code></div></pre>\n<p>into</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #6E7781\">// namespace import</span></div><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">*</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">as</span><span style=\"color: #24292F\"> fs </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">\"fs\"</span></div></code></div></pre>\n<p>Occasionally, you’ll run into a rare situation where the CJS module you’re importing from, exports a single thing that’s <em>incompatible</em> with this <em>namespace import</em> technique.</p>\n<p>Here’s a small example of where the <em>namespace import</em> fails:</p>\n<pre class=\"shiki github-light twoslash lsp\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #6E7781\">////////////////////////////////////////////////////////</span></div><div class='line'><span style=\"color: #6E7781\">// @filename: fruits.ts</span></div><span class=\"error\"><span>This module can only be referenced with ECMAScript imports/exports by turning on the 'esModuleInterop' flag and referencing its default export.</span><span class=\"code\">2497</span></span><span class=\"error-behind\">This module can only be referenced with ECMAScript imports/exports by turning on the 'esModuleInterop' flag and referencing its default export.</span><div class='line'><span style=\"color: #CF222E\">function</span><span style=\"color: #24292F\"> </span><span style=\"color: #8250DF\"><data-lsp lsp='function createBanana(): {&#10;    name: string;&#10;    color: string;&#10;    mass: number;&#10;}' >createBanana</data-lsp></span><span style=\"color: #24292F\">() {</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #CF222E\">return</span><span style=\"color: #24292F\"> { <data-lsp lsp='(property) name: string' >name</data-lsp>: </span><span style=\"color: #0A3069\">\"banana\"</span><span style=\"color: #24292F\">, <data-lsp lsp='(property) color: string' >color</data-lsp>: </span><span style=\"color: #0A3069\">\"yellow\"</span><span style=\"color: #24292F\">, <data-lsp lsp='(property) mass: number' >mass</data-lsp>: </span><span style=\"color: #0550AE\">183</span><span style=\"color: #24292F\"> }</span></div><div class='line'><span style=\"color: #24292F\">}</span></div><div class='line'>&nbsp;</div><div class='line'><span style=\"color: #6E7781\">// equivalent to CJS `module.exports = createBanana`</span></div><div class='line'><span style=\"color: #CF222E\">export</span><span style=\"color: #953800\"> </span><span style=\"color: #CF222E\">=</span><span style=\"color: #953800\"> </span><span style=\"color: #24292F\"><data-lsp lsp='function createBanana(): {&#10;    name: string;&#10;    color: string;&#10;    mass: number;&#10;}' >createBanana</data-lsp></span></div><div class='line'><span style=\"color: #6E7781\">////////////////////////////////////////////////////////</span></div><div class='line'><span style=\"color: #6E7781\">// @filename: smoothie.ts</span></div><div class='line'>&nbsp;</div><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">*</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">as</span><span style=\"color: #24292F\"> <data-lsp lsp='(alias) function createBanana(): {&#10;    name: string;&#10;    color: string;&#10;    mass: number;&#10;}&#10;import createBanana' >createBanana</data-lsp> </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">\"./fruits\"</span></div></code><a class='playground-link' href='https://www.typescriptlang.org/play/#code/PTAEAEFMCdoe2gZwFygEwBYCcB2AUCBALZwAmArgDaSoDCcRJAdgFIDKBIX3Pvf-AwcE4QAZgEtqTAIZEaoUdHLiALogB0avKPJMAxivFwmoPdEjSVkAELSZMgBQBKUAG88oUOZXloJ16AycqgARABGdpEhADSmcJQIoQCekJQJAO4xoETSiCigAIwAHADMoAC+eJUikACOygBu0lIqoCpwoLTsoAAGJBTU6pAAHgAOCGqgALym5pY2kTI9eCPj0K0zZhZWtvbSnEKHR8fcIuASUrLyiCRwKgAW4pCaiHh44kRrrQBUoLmz2wWewU8CIoBC6mAimUahCQA'>Try</a></div></pre>\n<p>While this error message is accurate, you may not want to follow the\nadvice it provides in all situations.</p>\n<blockquote>\n<p>If you need to enable the <code>esModuleInterop</code> and <code>allowSyntheticDefaultImports</code> compiler flags in order to allow your types to compile, anyone who depends on your types will also have no choice but to enable them, or their project’s types won’t compile.</p>\n</blockquote>\n<p>I call these “viral options”, and take extra steps to avoid using them in my libraries.</p>\n<div class=\"custom-block warning\"><div class=\"custom-block-heading\"><img class=\"emoji-icon\" alt=\"emoji-warning\" data-icon=\"emoji-warning\" style=\"display: inline; margin: 0; margin-top: 1px; position: relative; top: 5px; width: 25px\" src=\"data:image/png;base64, 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\" title=\"emoji-warning\"> Warning: Visual Studio Code downloads types automatically</div><div class=\"custom-block-body\"><p>The type information you publish could be downloaded into a user’s\nauthoring environment, even if they don’t directly consume your library\n<br/>\n<br/>\nType-checking is a <em>holistic operation</em> that can be upset by\neven one dependency whose types don’t align well with a project’s compiler settings</p></div></div>\n<p>Thankfully we have another option here — the use of an older module loading API that imports the code properly, and matches up the type information as well</p>\n<pre class=\"shiki github-light twoslash lsp\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #6E7781\">////////////////////////////////////////////////////////</span></div><div class='line'><span style=\"color: #6E7781\">// @filename: fruits.ts</span></div><div class='line'><span style=\"color: #CF222E\">function</span><span style=\"color: #24292F\"> </span><span style=\"color: #8250DF\"><data-lsp lsp='function createBanana(): {&#10;    name: string;&#10;    color: string;&#10;    mass: number;&#10;}' >createBanana</data-lsp></span><span style=\"color: #24292F\">() {</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #CF222E\">return</span><span style=\"color: #24292F\"> { <data-lsp lsp='(property) name: string' >name</data-lsp>: </span><span style=\"color: #0A3069\">\"banana\"</span><span style=\"color: #24292F\">, <data-lsp lsp='(property) color: string' >color</data-lsp>: </span><span style=\"color: #0A3069\">\"yellow\"</span><span style=\"color: #24292F\">, <data-lsp lsp='(property) mass: number' >mass</data-lsp>: </span><span style=\"color: #0550AE\">183</span><span style=\"color: #24292F\"> }</span></div><div class='line'><span style=\"color: #24292F\">}</span></div><div class='line'>&nbsp;</div><div class='line'><span style=\"color: #6E7781\">// equivalent to CJS `module.exports = createBanana`</span></div><div class='line'><span style=\"color: #CF222E\">export</span><span style=\"color: #953800\"> </span><span style=\"color: #CF222E\">=</span><span style=\"color: #953800\"> </span><span style=\"color: #24292F\"><data-lsp lsp='function createBanana(): {&#10;    name: string;&#10;    color: string;&#10;    mass: number;&#10;}' >createBanana</data-lsp></span></div><div class='line'><span style=\"color: #6E7781\">////////////////////////////////////////////////////////</span></div><div class='line'><span style=\"color: #6E7781\">// @filename: smoothie.ts</span></div><div class='line'>&nbsp;</div><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> <data-lsp lsp='(alias) function createBanana(): {&#10;    name: string;&#10;    color: string;&#10;    mass: number;&#10;}&#10;import createBanana = require(\"./fruits\")' >createBanana</data-lsp> </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">require</span><span style=\"color: #24292F\">(</span><span style=\"color: #0A3069\">\"./fruits\"</span><span style=\"color: #24292F\">)</span></div><div class='line'><span style=\"color: #CF222E\">const</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\"><data-lsp lsp='const banana: {&#10;    name: string;&#10;    color: string;&#10;    mass: number;&#10;}' style='border-bottom: solid 2px lightgrey;'>banana</data-lsp></span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> </span><span style=\"color: #8250DF\"><data-lsp lsp='(alias) createBanana(): {&#10;    name: string;&#10;    color: string;&#10;    mass: number;&#10;}&#10;import createBanana = require(\"./fruits\")' >createBanana</data-lsp></span><span style=\"color: #24292F\">()</span></div><div class='meta-line'><span class='popover-prefix'>        </span><span class='popover'><div class='arrow'></div>const banana: {\n    name: string;\n    color: string;\n    mass: number;\n}</span></div></code><a class='playground-link' href='https://www.typescriptlang.org/play/#code/PTAEAEFsHsBMFcA2BTAXKAwtSMB2ApAZQCgQzyLKrqbaRSxwAzASxVwENI1QmAneCwAuAZwB0o4k3i4AxkJbRcoWX2QchyAEIdOnABQBKUAG9ioUGqHw+yk6E7d0AIgBGuj84A0K6Imh8LgCeyIj+AO7eoJAcIiLoAIwAHADMoAC+xJkMoMgAjoIAbhzsQqBC0JhEoAAGMAgoYsgAHgAOAaKgALwqahraHpw1xC3tfGU9quqaOnocDHSLS8vkOcxsyI48IjDQQgAWLMgSIsTELJBjZVP9sx7dlvmCavrOYsD8gqLOhsSySiIyu45g8bjNBhwjDkLBYAHoAfiAA'>Try</a></div></pre>\n<p>Recall that the error message said</p>\n<blockquote>\n<p>This module can only be referenced <strong>with ECMAScript imports/exports</strong> by turning on the ‘esModuleInterop’ flag and referencing its default export.</p>\n</blockquote>\n<p>We have solved this by avoiding the use of an ECMAScript import/export entirely. After all, the code we’re referring to here is not following the ES module spec.</p>\n<p>The compiled output of this file will still be what we’re looking for in the CJS world</p>\n<pre class=\"shiki github-light twoslash lsp\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #0A3069\">\"use strict\"</span><span style=\"color: #24292F\">;</span></div><div class='line'><span style=\"color: #CF222E\">function</span><span style=\"color: #24292F\"> </span><span style=\"color: #8250DF\">createBanana</span><span style=\"color: #24292F\">() {</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #CF222E\">return</span><span style=\"color: #24292F\"> { name: </span><span style=\"color: #0A3069\">\"banana\"</span><span style=\"color: #24292F\">, color: </span><span style=\"color: #0A3069\">\"yellow\"</span><span style=\"color: #24292F\">, mass: </span><span style=\"color: #0550AE\">183</span><span style=\"color: #24292F\"> };</span></div><div class='line'><span style=\"color: #24292F\">}</span></div><div class='line'><span style=\"color: #0550AE\">module</span><span style=\"color: #24292F\">.</span><span style=\"color: #0550AE\">exports</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> createBanana;</span></div><div class='line'><span style=\"color: #6E7781\">////////////////////////////////////////////////////////</span></div><div class='line'>&nbsp;</div></code><a class='playground-link' href='https://www.typescriptlang.org/play/#code/PTAEAEGcAsHsHcCiBbAlgFwFAgs2ATAVwBsBTALlAGFZk8A7AKQGVsxx0BDAJwHNT0lRMwBMABgCMAVjYQYCFBnSl8AMVRlKAM26EMkAHQArSGxDmLlq9Zu27s8Fo2l6nZBVA696Qz8xbCegBjdFRYelAg7lJOZQAhTldXAAoASlAAb0xQUGj0Qm4IjNBXd0oAIgAjRJrygBpI2GJYbgqAT1JiZvh60GROSEhKCQAOAGZQAF9MadlSAEc9ADdOMnp0UHRYahZQAAM8IjIDUgAPAAcWn1AAXkjo2NIEpM49zDPL7g27qJj4mtcZjswJBoOsDicazcHkgeFg6GgqFIBj8mFQyE+G1+j2eNVuuQWemiyXKBmAXn05VSmCC4UgG2qL3x2P+LzSshyOQAegB+IA'>Try</a></div></pre>\n<pre class=\"shiki github-light twoslash lsp\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #0A3069\">\"use strict\"</span><span style=\"color: #24292F\">;</span></div><div class='line'><span style=\"color: #0550AE\">Object</span><span style=\"color: #24292F\">.</span><span style=\"color: #8250DF\">defineProperty</span><span style=\"color: #24292F\">(</span><span style=\"color: #0550AE\">exports</span><span style=\"color: #24292F\">, </span><span style=\"color: #0A3069\">\"__esModule\"</span><span style=\"color: #24292F\">, { value: </span><span style=\"color: #0550AE\">true</span><span style=\"color: #24292F\"> });</span></div><div class='line'><span style=\"color: #CF222E\">var</span><span style=\"color: #24292F\"> createBanana </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">require</span><span style=\"color: #24292F\">(</span><span style=\"color: #0A3069\">\"./fruits\"</span><span style=\"color: #24292F\">);</span></div><div class='line'><span style=\"color: #CF222E\">var</span><span style=\"color: #24292F\"> banana </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> </span><span style=\"color: #8250DF\">createBanana</span><span style=\"color: #24292F\">();</span></div><div class='line'>&nbsp;</div></code><a class='playground-link' href='https://www.typescriptlang.org/play/#code/PTAEAEGcAsHsHcCiBbAlgFwFAgs2ATAVwBsBTALlAGFZk8A7AKQGVsxx0BDAJwHNT0lRMwCsbCDAQoM6UvgBiqMpUh5Y6aKlIA6AFaQ2II8ZOmz5i5fHgAZktL1OyCqBvdCGSNvQGbhegDG6Kiw9KAB3KScsgBCnI6OABQAlKAA3pigoJHohNxhaaCOzpQARABG8VWlADThsMSw3GUAnqTEjfC1oMickJCUAIwAHADMoAC+mFPipACOHgBunGT06KDosNQsoAAGeERk2qQAHgAOTT6gALzhkdGkcQmcu5inF9zrtxFRsVWOhksQOBILM1jsqycLlUsHUmh0PkwmFQyA+6x+DyeVRu2XmHkiiVK2mAbg8PlKyUwAVCkHWlWeOIxf2eKXEWSyAD0APxAA'>Try</a></div></pre>\n<h2 id=\"native-es-module-support\" style=\"position:relative;\"><a href=\"#native-es-module-support\" aria-label=\"native es module support permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Native ES module support</h2>\n<p><a href=\"https://nodejs.medium.com/announcing-core-node-js-support-for-ecmascript-modules-c5d6dc29b663\">Node.js 13.2.0 introduced support for native ES modules</a>.</p>\n<p>This means you can natively run code containing thing like <code>import { Foo } from 'bar'</code>, use top-level <code>await</code> and more!</p>\n<p>How to unambiguously indicate which type of module you’re authoring</p>\n<ul>\n<li>Files with the <code>.mjs</code> extension are treated as native ES modules</li>\n<li>Files with the <code>.cjs</code> extension are treated as CJS modules</li>\n</ul>\n<p>You can also indicate whether <code>.js</code> files in your project should be treated as ES or CJS modules. In your <code>package.json</code> you may include a top-level <code>\"type\"</code> field with either of the following values</p>\n<ul>\n<li><code>\"module\"</code> indicates that <code>.js</code> files should be run as ES modules</li>\n<li><code>\"commonjs\"</code> indicates that <code>.js</code> files should be run as CommonJS</li>\n</ul>\n<p>Note that even as of Node 20.8.0, <strong>Node.js still assumes <code>.js</code> files are CommonJS if you specify no <code>\"type\"</code> field at all in your <code>\"package.json\"</code></strong></p>\n<h3 id=\"typescript-es-modules\" style=\"position:relative;\"><a href=\"#typescript-es-modules\" aria-label=\"typescript es modules permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TypeScript ES modules</h3>\n<p>TypeScript 5 supports native modules that follow the established conventions, replacing the <code>j</code> with a <code>t</code> (just as is done for <code>.jsx</code> and <code>.tsx</code> files). <code>.</code></p>\n<ul>\n<li><code>.mts</code> files are for TypeScript ES modules, and generate ES modules as output</li>\n<li><code>.cts</code> files are for TypeSCript CJS modules, and generate CJS modules as output</li>\n</ul>\n<p>Given that TypeScript gives you control of the module format in compiled output, you may wonder what the use case is for allowing this degree of flexibility</p>\n<p>Imagine you have a large Node project, currently in CJS, and you want to incrementally start converting a few modules at a time. This flexibility would allow you use these two types of modules side-by-side as you incrementally migrate, without attempting a risky automatic conversion that could have ramifications on build output.</p>\n<p>Sometimes you also may want different lint rules to apply to different module types, different <code>tsconfig</code>s, etc… Different file extensions make it easy to apply tools specifically, via <code>[globs](https://www.gnu.org/software/bash/manual/html_node/Pattern-Matching.html)</code>, regexes, etc…</p>\n<h2 id=\"importing-non-ts-things\" style=\"position:relative;\"><a href=\"#importing-non-ts-things\" aria-label=\"importing non ts things permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Importing non-TS things</h2>\n<p>Particularly if you use a bundler like webpack, parcel or snowpack, you\nmay end up importing things that aren’t <code>.js</code> or <code>.ts</code> files</p>\n<p>For example, maybe you’ll need to <a href=\"https://v4.webpack.js.org/loaders/file-loader/#getting-started\">import an image file with webpack</a> like this</p>\n<pre class=\"shiki github-light twoslash lsp\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> <data-lsp lsp='import img' >img</data-lsp> </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\"><data-err>&quot;./file.png&quot;</data-err></span></div><span class=\"error\"><span>Cannot find module './file.png' or its corresponding type declarations.</span><span class=\"code\">2307</span></span><span class=\"error-behind\">Cannot find module './file.png' or its corresponding type declarations.</span></code><a class='playground-link' href='https://www.typescriptlang.org/play/#code/PTAEAEFMCdoe2gZwFygEwGYAMB2AUAJYC2ADggC6jEDmoAZvEaAEQB0wdBANpKyQHbVmQA'>Try</a></div></pre>\n<p><code>file.png</code> is obviously not a TypeScript file — we just need\nto tell TypeScript that <strong>whenever we import a <code>.png</code> file,\nit should be treated as if it’s a JS module with a string\nvalue as its default export</strong></p>\n<p>This can be accomplished through a <em>module declaration</em> as shown below</p>\n<pre class=\"shiki github-light twoslash lsp\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #6E7781\">// @filename: global.d.ts</span></div><div class='line'><span style=\"color: #CF222E\">declare</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">module</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">\"*.png\"</span><span style=\"color: #24292F\"> {</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #CF222E\">const</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\"><data-lsp lsp='const imgUrl: string' >imgUrl</data-lsp></span><span style=\"color: #CF222E\">:</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">string</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #CF222E\">export</span><span style=\"color: #953800\"> </span><span style=\"color: #CF222E\">default</span><span style=\"color: #953800\"> </span><span style=\"color: #24292F\"><data-lsp lsp='const imgUrl: string' >imgUrl</data-lsp></span></div><div class='line'><span style=\"color: #24292F\">}</span></div><div class='line'><span style=\"color: #6E7781\">// @filename: component.ts</span></div><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> <data-lsp lsp='(alias) const img: string&#10;import img' >img</data-lsp> </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">\"./file.png\"</span></div></code><a class='playground-link' href='https://www.typescriptlang.org/play/#code/PTAEAEDMEsBsFMB2BDAtvAXKA5rA9gEbKwB0AJiQC4DOAUGfAMazIBO8oqeZArgqACIAVCQAOibANABvWqFCM8iapVDRU2AKqtYWFa2gS5oeAA9ReVqoaRkfVeq07aAX1ogIMBCnRZFqC0QkSio6dQsrNQ1QSFY8VEESYC94MQkBIA'>Try</a></div></pre>\n<p>Like an interface, this is purely type information that will “compile away”\nas part of your build process. We’ll talk more about module declarations\nwhen we discuss <strong>ambient type information</strong></p>","tableOfContents":"<ul>\n<li><a href=\"#es-module-imports-and-exports\">ES Module imports and exports</a></li>\n<li>\n<p><a href=\"#importing-types\">Importing types</a></p>\n<ul>\n<li><a href=\"#how-typescript-erases-imports-of-types\">How TypeScript erases imports of types</a></li>\n<li><a href=\"#using-other-tools-like-babel-webpack-parcel-and-more\">Using other tools like Babel, Webpack, Parcel and more</a></li>\n<li><a href=\"#type-only-imports\">Type-only imports</a></li>\n</ul>\n</li>\n<li><a href=\"#commonjs-interop\">CommonJS Interop</a></li>\n<li>\n<p><a href=\"#native-es-module-support\">Native ES module support</a></p>\n<ul>\n<li><a href=\"#typescript-es-modules\">TypeScript ES modules</a></li>\n</ul>\n</li>\n<li><a href=\"#importing-non-ts-things\">Importing non-TS things</a></li>\n</ul>","fields":{"slug":"/course/intermediate-v2/03-modules/"},"frontmatter":{"title":"Modules & CJS interop","course":"intermediate-v2","date":"June 10, 2021","description":"Although most of the code we write today is in the form of\nES modules, plenty of dependencies are packaged in the\nCommonJS module format. In this chapter, we'll look at modules in depth\nso that you have all the tools you need in order to consume all\nthe dependencies you care about, while keeping the TS compiler happy\n"}}},"pageContext":{"slug":"/course/intermediate-v2/03-modules/","title":"Modules & CJS interop","course":"intermediate-v2","order":3,"previous":{"fields":{"slug":"/course/intermediate-v2/02-declaration-merging/"},"frontmatter":{"title":"Declaration Merging","order":2,"course":"intermediate-v2","isExercise":null}},"next":{"fields":{"slug":"/course/intermediate-v2/04-type-queries/"},"frontmatter":{"title":"Type Queries","order":4,"course":"intermediate-v2","isExercise":null}}}},
    "staticQueryHashes": ["2785745750","2841359383"]}