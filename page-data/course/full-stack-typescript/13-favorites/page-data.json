{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/course/full-stack-typescript/13-favorites/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Learn TypeScript w/ Mike North","courses":[{"id":"fundamentals-v3","name":"TypeScript Fundamentals v3","summary":"Learn everything you need to know in order to confidently and successfully use TypeScript to build a modern JavaScript app."},{"id":"fundamentals-v4","name":"TypeScript Fundamentals v4","summary":"Learn everything you need to know in order to confidently and successfully use TypeScript to build a modern JavaScript app."},{"id":"intermediate-v1","name":"Intermediate TypeScript v1","summary":"Leverage TypeScript's strengths to provide clarity in the face of\ncomplexity, while protecting your codebase and team from it's weaknesses.\n"},{"id":"intermediate-v2","name":"Intermediate TypeScript v2","summary":"Leverage TypeScript's strengths to provide clarity in the face of\ncomplexity, while protecting your codebase and team from it's weaknesses.\n"},{"id":"making-typescript-stick","name":"Making TypeScript Stick","summary":"Tackle a series of challenges designed to reinforce your knowledge and make\nthe important concepts truly \"stick\" in your mind.\n"},{"id":"enterprise-v2","name":"Enterprise-Scale TypeScript v2","summary":"Learn how to manage large TypeScript code bases with confidence and ease.\nIn this course, Mike shares his knowledge from years of experience working\nwith teams who maintain TypeScript projects with hundreds of regular full-time\ncontributors and 100K+ lines of code.\n"},{"id":"full-stack-typescript","name":"Full Stack TypeScript","summary":"Combine TypeScript and GraphQL's type systems to create full-stack, fully\ntype-checked code bases that are shockingly easy to refactor and maintain.\n"}]}},"markdownRemark":{"id":"c4022802-7a52-52d9-b3cc-491ba97c87c5","excerpt":"Schema Update your graphql.schema by adding the following and add add two new mutations In client/src/Tweet.tsx add these imports and add two new mutations Runâ€¦","html":"<h2 id=\"schema\" style=\"position:relative;\"><a href=\"#schema\" aria-label=\"schema permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Schema</h2>\n<p>Update your <code>graphql.schema</code> by adding the following</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">graphql</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">input</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">FavoriteInput</span><span style=\"color: #24292F\"> {</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #953800\">userId</span><span style=\"color: #24292F\">: </span><span style=\"color: #0550AE\">String</span><span style=\"color: #CF222E\">!</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #953800\">tweetId</span><span style=\"color: #24292F\">: </span><span style=\"color: #0550AE\">String</span><span style=\"color: #CF222E\">!</span></div><div class='line'><span style=\"color: #24292F\">}</span></div></code></div></pre>\n<p>and add add two new mutations</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">type Mutation {</span></div><div class='line'><span style=\"color: #24292F\">  createTweet(userId: String!, body: String!): Tweet!</span></div><div class='line'><span style=\"color: #116329\">+ createFavorite(favorite: FavoriteInput!): Favorite!</span></div><div class='line'><span style=\"color: #116329\">+ deleteFavorite(favorite: FavoriteInput!): Favorite!</span></div><div class='line'><span style=\"color: #24292F\">}</span></div></code></div></pre>\n<p>In <code>client/src/Tweet.tsx</code> add these imports</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> { gql } </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">\"@apollo/client\"</span></div><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> {</span></div><div class='line'><span style=\"color: #24292F\">  useCreateFavoriteMutation,</span></div><div class='line'><span style=\"color: #24292F\">  useDeleteFavoriteMutation,</span></div><div class='line'><span style=\"color: #24292F\">} </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">\"./generated/graphql\"</span></div><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> { GET_TIMELINE_TWEETS } </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">\"./Timeline\"</span></div><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> { GET_CURRENT_USER } </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">\"./App\"</span></div></code></div></pre>\n<p>and add two new mutations</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">export</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">const</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">CREATE_FAVORITE</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> </span><span style=\"color: #8250DF\">gql</span><span style=\"color: #0A3069\">`</span></div><div class='line'><span style=\"color: #0A3069\">  mutation CreateFavorite($favorite: FavoriteInput!) {</span></div><div class='line'><span style=\"color: #0A3069\">    createFavorite(favorite: $favorite) {</span></div><div class='line'><span style=\"color: #0A3069\">      id</span></div><div class='line'><span style=\"color: #0A3069\">    }</span></div><div class='line'><span style=\"color: #0A3069\">  }</span></div><div class='line'><span style=\"color: #0A3069\">`</span></div><div class='line'><span style=\"color: #CF222E\">export</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">const</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">DELETE_FAVORITE</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> </span><span style=\"color: #8250DF\">gql</span><span style=\"color: #0A3069\">`</span></div><div class='line'><span style=\"color: #0A3069\">  mutation DeleteFavorite($favorite: FavoriteInput!) {</span></div><div class='line'><span style=\"color: #0A3069\">    deleteFavorite(favorite: $favorite) {</span></div><div class='line'><span style=\"color: #0A3069\">      id</span></div><div class='line'><span style=\"color: #0A3069\">    }</span></div><div class='line'><span style=\"color: #0A3069\">  }</span></div><div class='line'><span style=\"color: #0A3069\">`</span></div></code></div></pre>\n<p>Run <code>yarn codegen</code> in both the <code>client</code> and <code>server</code> sub-projects to get\nupdated TS types that include this change to the schema and queries</p>\n<h2 id=\"backend\" style=\"position:relative;\"><a href=\"#backend\" aria-label=\"backend permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Backend</h2>\n<p>In <code>server/src/resolvers/Mutation.ts</code> add an import</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> { favoriteTransform } </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">\"../transforms\"</span></div></code></div></pre>\n<p>and add two new resolvers for the new mutations</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">  async </span><span style=\"color: #8250DF\">createFavorite</span><span style=\"color: #24292F\">(_parent, args, { db }) {</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #CF222E\">const</span><span style=\"color: #24292F\"> { </span><span style=\"color: #0550AE\">favorite</span><span style=\"color: #24292F\"> } </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> args;</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #CF222E\">const</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">fav</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">await</span><span style=\"color: #24292F\"> db.</span><span style=\"color: #8250DF\">createFavorite</span><span style=\"color: #24292F\">(favorite);</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #CF222E\">return</span><span style=\"color: #24292F\"> {</span></div><div class='line'><span style=\"color: #24292F\">      </span><span style=\"color: #CF222E\">...</span><span style=\"color: #8250DF\">favoriteTransform</span><span style=\"color: #24292F\">(fav),</span></div><div class='line'><span style=\"color: #24292F\">      user: db.</span><span style=\"color: #8250DF\">getUserById</span><span style=\"color: #24292F\">(fav.userId),</span></div><div class='line'><span style=\"color: #24292F\">      tweet: </span><span style=\"color: #8250DF\">tweetTransform</span><span style=\"color: #24292F\">(db.</span><span style=\"color: #8250DF\">getTweetById</span><span style=\"color: #24292F\">(fav.tweetId)),</span></div><div class='line'><span style=\"color: #24292F\">    };</span></div><div class='line'><span style=\"color: #24292F\">  },</span></div><div class='line'><span style=\"color: #24292F\">  async </span><span style=\"color: #8250DF\">deleteFavorite</span><span style=\"color: #24292F\">(_parent, args, { db }) {</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #CF222E\">const</span><span style=\"color: #24292F\"> { </span><span style=\"color: #0550AE\">favorite</span><span style=\"color: #24292F\"> } </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> args;</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #CF222E\">const</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">fav</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">await</span><span style=\"color: #24292F\"> db.</span><span style=\"color: #8250DF\">deleteFavorite</span><span style=\"color: #24292F\">(favorite);</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #CF222E\">return</span><span style=\"color: #24292F\"> {</span></div><div class='line'><span style=\"color: #24292F\">      </span><span style=\"color: #CF222E\">...</span><span style=\"color: #8250DF\">favoriteTransform</span><span style=\"color: #24292F\">(fav),</span></div><div class='line'><span style=\"color: #24292F\">      user: db.</span><span style=\"color: #8250DF\">getUserById</span><span style=\"color: #24292F\">(fav.userId),</span></div><div class='line'><span style=\"color: #24292F\">      tweet: </span><span style=\"color: #8250DF\">tweetTransform</span><span style=\"color: #24292F\">(db.</span><span style=\"color: #8250DF\">getTweetById</span><span style=\"color: #24292F\">(fav.tweetId)),</span></div><div class='line'><span style=\"color: #24292F\">    };</span></div><div class='line'><span style=\"color: #24292F\">  },</span></div></code></div></pre>\n<h2 id=\"frontend\" style=\"position:relative;\"><a href=\"#frontend\" aria-label=\"frontend permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Frontend</h2>\n<p>In <code>client/src/Tweet.tsx</code>, inside the component</p>\n<p>Make a small adjustment to the destructured assignment of the tweet object</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #82071E\">-  id: _id,</span></div><div class='line'><span style=\"color: #116329\">+  id,</span></div></code></div></pre>\n<p>add hooks for the two new mutations</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">const</span><span style=\"color: #24292F\"> [</span><span style=\"color: #0550AE\">createFavorite</span><span style=\"color: #24292F\">, { </span><span style=\"color: #953800\">error</span><span style=\"color: #24292F\">: </span><span style=\"color: #0550AE\">createFavoriteError</span><span style=\"color: #24292F\"> }] </span><span style=\"color: #CF222E\">=</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #8250DF\">useCreateFavoriteMutation</span><span style=\"color: #24292F\">({</span></div><div class='line'><span style=\"color: #24292F\">    variables: {</span></div><div class='line'><span style=\"color: #24292F\">      favorite: { tweetId: id, userId: currentUserId },</span></div><div class='line'><span style=\"color: #24292F\">    },</span></div><div class='line'><span style=\"color: #24292F\">    refetchQueries: [</span><span style=\"color: #0550AE\">GET_TIMELINE_TWEETS</span><span style=\"color: #24292F\">, </span><span style=\"color: #0550AE\">GET_CURRENT_USER</span><span style=\"color: #24292F\">],</span></div><div class='line'><span style=\"color: #24292F\">  })</span></div><div class='line'><span style=\"color: #CF222E\">const</span><span style=\"color: #24292F\"> [</span><span style=\"color: #0550AE\">deleteFavorite</span><span style=\"color: #24292F\">, { </span><span style=\"color: #953800\">error</span><span style=\"color: #24292F\">: </span><span style=\"color: #0550AE\">deleteFavoriteError</span><span style=\"color: #24292F\"> }] </span><span style=\"color: #CF222E\">=</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #8250DF\">useDeleteFavoriteMutation</span><span style=\"color: #24292F\">({</span></div><div class='line'><span style=\"color: #24292F\">    variables: {</span></div><div class='line'><span style=\"color: #24292F\">      favorite: { tweetId: id, userId: currentUserId },</span></div><div class='line'><span style=\"color: #24292F\">    },</span></div><div class='line'><span style=\"color: #24292F\">    refetchQueries: [</span><span style=\"color: #0550AE\">GET_TIMELINE_TWEETS</span><span style=\"color: #24292F\">, </span><span style=\"color: #0550AE\">GET_CURRENT_USER</span><span style=\"color: #24292F\">],</span></div><div class='line'><span style=\"color: #24292F\">  })</span></div><div class='line'></div><div class='line'><span style=\"color: #CF222E\">if</span><span style=\"color: #24292F\"> (createFavoriteError) {</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #CF222E\">return</span><span style=\"color: #24292F\"> (</span></div><div class='line'><span style=\"color: #24292F\">    &lt;</span><span style=\"color: #953800\">p</span><span style=\"color: #24292F\">&gt;</span></div><div class='line'><span style=\"color: #24292F\">      </span><span style=\"color: #0550AE\">Error</span><span style=\"color: #24292F\"> creating </span><span style=\"color: #953800\">favorite</span><span style=\"color: #CF222E\">:</span><span style=\"color: #24292F\"> {</span><span style=\"color: #953800\">createFavoriteError</span><span style=\"color: #24292F\">.</span><span style=\"color: #953800\">message</span><span style=\"color: #24292F\">}</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #CF222E\">&lt;/</span><span style=\"color: #24292F\">p</span><span style=\"color: #CF222E\">&gt;</span></div><div class='line'><span style=\"color: #24292F\">  )</span></div><div class='line'><span style=\"color: #24292F\">}</span></div><div class='line'><span style=\"color: #CF222E\">if</span><span style=\"color: #24292F\"> (deleteFavoriteError) {</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #CF222E\">return</span><span style=\"color: #24292F\"> (</span></div><div class='line'><span style=\"color: #24292F\">    &lt;</span><span style=\"color: #953800\">p</span><span style=\"color: #24292F\">&gt;</span></div><div class='line'><span style=\"color: #24292F\">      </span><span style=\"color: #0550AE\">Error</span><span style=\"color: #24292F\"> deleting </span><span style=\"color: #953800\">favorite</span><span style=\"color: #CF222E\">:</span><span style=\"color: #24292F\"> {</span><span style=\"color: #953800\">deleteFavoriteError</span><span style=\"color: #24292F\">.</span><span style=\"color: #953800\">message</span><span style=\"color: #24292F\">}</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #CF222E\">&lt;/</span><span style=\"color: #24292F\">p</span><span style=\"color: #CF222E\">&gt;</span></div><div class='line'><span style=\"color: #24292F\">  )</span></div><div class='line'><span style=\"color: #24292F\">}</span></div></code></div></pre>\n<p>replace the contents of <code>handleFavoriteClick</code> with</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">if</span><span style=\"color: #24292F\"> (isFavorited)</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #8250DF\">deleteFavorite</span><span style=\"color: #24292F\">().</span><span style=\"color: #8250DF\">catch</span><span style=\"color: #24292F\">((</span><span style=\"color: #953800\">err</span><span style=\"color: #24292F\">) </span><span style=\"color: #CF222E\">=&gt;</span></div><div class='line'><span style=\"color: #24292F\">    console.</span><span style=\"color: #8250DF\">error</span><span style=\"color: #24292F\">(</span><span style=\"color: #0A3069\">\"error while deleting favorite\"</span><span style=\"color: #24292F\">, err)</span></div><div class='line'><span style=\"color: #24292F\">  )</span></div><div class='line'><span style=\"color: #CF222E\">else</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #8250DF\">createFavorite</span><span style=\"color: #24292F\">().</span><span style=\"color: #8250DF\">catch</span><span style=\"color: #24292F\">((</span><span style=\"color: #953800\">err</span><span style=\"color: #24292F\">) </span><span style=\"color: #CF222E\">=&gt;</span></div><div class='line'><span style=\"color: #24292F\">    console.</span><span style=\"color: #8250DF\">error</span><span style=\"color: #24292F\">(</span><span style=\"color: #0A3069\">\"error while creating favorite\"</span><span style=\"color: #24292F\">, err)</span></div><div class='line'><span style=\"color: #24292F\">  )</span></div></code></div></pre>\n<p>Now try liking and un-liking tweets. You should see the like count and icon change!</p>","tableOfContents":"<ul>\n<li><a href=\"#schema\">Schema</a></li>\n<li><a href=\"#backend\">Backend</a></li>\n<li><a href=\"#frontend\">Frontend</a></li>\n</ul>","fields":{"slug":"/course/full-stack-typescript/13-favorites/"},"frontmatter":{"title":"Favorites Interactivity","course":"full-stack-typescript","date":"March 24, 2022","description":"Let's make our \"like\" button clickable, by creating and deleting a \"favorite\" resource\n"}}},"pageContext":{"slug":"/course/full-stack-typescript/13-favorites/","title":"Favorites Interactivity","course":"full-stack-typescript","order":13,"previous":{"fields":{"slug":"/course/full-stack-typescript/12-favorites/"},"frontmatter":{"title":"Favorites","order":12,"course":"full-stack-typescript","isExercise":null}},"next":{"fields":{"slug":"/course/full-stack-typescript/14-trends/"},"frontmatter":{"title":"Trends","order":14,"course":"full-stack-typescript","isExercise":null}}}},
    "staticQueryHashes": ["2785745750","2841359383"]}