{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/course/full-stack-typescript/07-imported-resolver/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Learn TypeScript w/ Mike North","courses":[{"id":"fundamentals-v3","name":"TypeScript Fundamentals v3","summary":"Learn everything you need to know in order to confidently and successfully use TypeScript to build a modern JavaScript app."},{"id":"fundamentals-v4","name":"TypeScript Fundamentals v4","summary":"Learn everything you need to know in order to confidently and successfully use TypeScript to build a modern JavaScript app."},{"id":"intermediate-v1","name":"Intermediate TypeScript v1","summary":"Leverage TypeScript's strengths to provide clarity in the face of\ncomplexity, while protecting your codebase and team from it's weaknesses.\n"},{"id":"intermediate-v2","name":"Intermediate TypeScript v2","summary":"Leverage TypeScript's strengths to provide clarity in the face of\ncomplexity, while protecting your codebase and team from it's weaknesses.\n"},{"id":"making-typescript-stick","name":"Making TypeScript Stick","summary":"Tackle a series of challenges designed to reinforce your knowledge and make\nthe important concepts truly \"stick\" in your mind.\n"},{"id":"enterprise-v2","name":"Enterprise TypeScript v2","summary":"Combine TypeScript and GraphQL's type systems to create full-stack, fully\ntype-checked code bases that are shockingly easy to refactor and maintain.\n"},{"id":"full-stack-typescript","name":"Full Stack TypeScript","summary":"Combine TypeScript and GraphQL's type systems to create full-stack, fully\ntype-checked code bases that are shockingly easy to refactor and maintain.\n"}]}},"markdownRemark":{"id":"b9a0d22b-67d2-589e-8e17-28c80f3fbeb1","excerpt":"The Types From within the ./server sub-project, run the following command You should see a new file appear with lots of types in it server/src/resolvers-types…","html":"<h2 id=\"the-types\" style=\"position:relative;\"><a href=\"#the-types\" aria-label=\"the types permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Types</h2>\n<p>From within the <code>./server</code> sub-project, run the following command</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">yarn codegen</span></div></code></div></pre>\n<p>You should see a new file appear with lots of types in it <code>server/src/resolvers-types.generated.ts</code>.</p>\n<p>Sometimes after running this command, you may find you need to restart your TypeScript language server. In vscode you can do this\nby opening any <code>.ts</code> file, and then running the <code>> Restart TS Server</code> command.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7cc5b103f2f322248c169072dd60ab67/0b533/restart-ts-server.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABeElEQVQY05WJ3UvCUADF9xiJVhBzH9478zq3dHfXTdtWc1OnFRZFH9rsY84i6qkg6EmpZhEE/tMxK4Le+nH4cTiHkiS5IBZyq2oeV1BJQ4pewLqIdYkYElmT1OrMawX8XWRiyOU4Iq5SRFWzAiwZbtc/7Z+eD4ZXR92TIBy2tzu223AantNozuw59Wbc67+hipjkEJIqttXatbf26juHptepbe9XHa9s2prlaFZNW3c1yyGWq5iuYjrEqut2U99oUobXKbuby+0b+SJSghccRqUgKg8ndO8l0Z+m/I+k/5E8fkv4U96PlEFUDCawN5pr3SU27ykBwoywslA704KxdztZv3yqDEbO9TN38JjqvS/1Xhe7bwu7j8n9kdgfm+HICMf5w4d59yrVuKZAJgYAwPE8zbB0mkkzLM2wPMcBjgEsE5vnAM+yLEfPLpbjwQxKJAZRMSFEKRVBhs8KggBhVoAC/MvX/nMBCAGVkzHKraB8HiEEAID/4RPwgGByElfB9wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"restart ts server\"\n        title=\"restart ts server\"\n        src=\"/static/7cc5b103f2f322248c169072dd60ab67/0b533/restart-ts-server.png\"\n        srcset=\"/static/7cc5b103f2f322248c169072dd60ab67/63868/restart-ts-server.png 250w,\n/static/7cc5b103f2f322248c169072dd60ab67/0b533/restart-ts-server.png 500w\"\n        sizes=\"(max-width: 500px) 100vw, 500px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Go to <code>server/src/resolvers.ts</code> and import this new file, along with our “database utility”</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> Db </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">\"./db\"</span></div><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> { Resolvers } </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">\"./resolvers-types.generated\"</span></div></code></div></pre>\n<p>Add a return type annotation for <code>createResolvers</code></p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #82071E\">- export function createResolvers() {</span></div><div class='line'><span style=\"color: #116329\">+ export function createResolvers(): Resolvers {</span></div></code></div></pre>\n<p>Next, go to the file with your query resolvers <code>server/src/resolvers/Query.ts</code>, and add this import</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> { QueryResolvers } </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">\"../resolvers-types.generated\"</span></div></code></div></pre>\n<p>And a type annotation for the variable</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">const</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">queryTwitterResolvers</span><span style=\"color: #CF222E\">:</span><span style=\"color: #24292F\"> </span><span style=\"color: #953800\">QueryResolvers</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> {</span></div></code></div></pre>\n<p>Run your test query again, it should work.</p>\n<p>Add some sample data to return from <code>suggestions()</code> instead of the empty array</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">return</span><span style=\"color: #24292F\"> [</span></div><div class='line'><span style=\"color: #24292F\">  {</span></div><div class='line'><span style=\"color: #24292F\">    name: </span><span style=\"color: #0A3069\">\"TypeScript Project\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    handle: </span><span style=\"color: #0A3069\">\"TypeScript\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    avatarUrl: </span><span style=\"color: #0A3069\">\"http://localhost:3000/static/ts-logo.png\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    reason: </span><span style=\"color: #0A3069\">\"Because you follow @MichaelLNorth\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    id: </span><span style=\"color: #0A3069\">\"1\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">  },</span></div><div class='line'><span style=\"color: #24292F\">  {</span></div><div class='line'><span style=\"color: #24292F\">    name: </span><span style=\"color: #0A3069\">\"jQuery\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    handle: </span><span style=\"color: #0A3069\">\"jquery\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    avatarUrl:</span></div><div class='line'><span style=\"color: #24292F\">      </span><span style=\"color: #0A3069\">\"http://localhost:3000/static/jquery-logo.jpeg\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    reason: </span><span style=\"color: #0A3069\">\"Because you follow @FrontendMasters\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">    id: </span><span style=\"color: #0A3069\">\"2\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">  },</span></div><div class='line'><span style=\"color: #24292F\">]</span></div></code></div></pre>\n<p>Everything should still type-check, but if you comment out some fields in these\nobjects you should get some feedback from the TS compiler.</p>\n<h2 id=\"context\" style=\"position:relative;\"><a href=\"#context\" aria-label=\"context permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Context</h2>\n<p>There’s one more thing that’s convenient to do right now, and that’s\nprovide a type for the context object that’s created for every new request</p>\n<p>Add this interface to <code>server/src/resolvers.ts</code></p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> Db </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">\"./db\"</span></div><div class='line'></div><div class='line'><span style=\"color: #CF222E\">export</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">interface</span><span style=\"color: #24292F\"> </span><span style=\"color: #953800\">TwitterResolverContext</span><span style=\"color: #24292F\"> {</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #953800\">db</span><span style=\"color: #CF222E\">:</span><span style=\"color: #24292F\"> </span><span style=\"color: #953800\">Db</span></div><div class='line'><span style=\"color: #24292F\">}</span></div></code></div></pre>\n<p>And pass it in as a typeparam to the resolver types</p>\n<p><code>server/src/resolvers.ts</code></p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #82071E\">-const resolvers: Resolvers = {</span></div><div class='line'><span style=\"color: #116329\">+const resolvers: Resolvers&lt;TwitterResolverContext&gt; = {</span></div></code></div></pre>\n<p><code>server/src/resolvers/Query.ts</code></p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #116329\">+import { TwitterResolverContext } from '../resolvers';</span></div><div class='line'><span style=\"color: #24292F\">import { QueryResolvers } from '../resolvers-types.generated';</span></div><div class='line'></div><div class='line'><span style=\"color: #82071E\">-const queryTwitterResolvers: QueryResolvers</span></div><div class='line'><span style=\"color: #116329\">+const queryTwitterResolvers: QueryResolvers&lt;TwitterResolverContext&gt;</span></div></code></div></pre>\n<p>One more place we can put this type is in <code>server/src/apollo-server.ts</code></p>\n<p>Just add the import</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> {</span></div><div class='line'><span style=\"color: #24292F\">  createResolvers,</span></div><div class='line'><span style=\"color: #24292F\">  TwitterResolverContext,</span></div><div class='line'><span style=\"color: #24292F\">} </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">\"./resolvers\"</span></div></code></div></pre>\n<p>And before creating the <code>ApolloServer</code>, create a new variable</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">const</span><span style=\"color: #24292F\"> </span><span style=\"color: #8250DF\">context</span><span style=\"color: #CF222E\">:</span><span style=\"color: #24292F\"> () </span><span style=\"color: #CF222E\">=&gt;</span><span style=\"color: #24292F\"> </span><span style=\"color: #953800\">TwitterResolverContext</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> () </span><span style=\"color: #CF222E\">=&gt;</span><span style=\"color: #24292F\"> ({ db })</span></div></code></div></pre>\n<p>and pass it in when you create your <code>ApolloServer</code></p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">const server = new ApolloServer({</span></div><div class='line'><span style=\"color: #82071E\">-    context: () =&gt; ({ db }),</span></div><div class='line'><span style=\"color: #116329\">+    context,</span></div><div class='line'><span style=\"color: #24292F\">    schema: addResolversToSchema({</span></div></code></div></pre>\n<p>Next, let’s get our React UI actually consuming some of this data, using a GraphQL client!</p>","tableOfContents":"<ul>\n<li><a href=\"#the-types\">The Types</a></li>\n<li><a href=\"#context\">Context</a></li>\n</ul>","fields":{"slug":"/course/full-stack-typescript/07-imported-resolver/"},"frontmatter":{"title":"Typed Resolver","course":"full-stack-typescript","date":"March 24, 2022","description":"Let's deliver on the promise of two type systems coming together in blissful unity, by adding\nautomatically generated types to our resolvers\n"}}},"pageContext":{"slug":"/course/full-stack-typescript/07-imported-resolver/","title":"Typed Resolver","course":"full-stack-typescript","order":7,"previous":{"fields":{"slug":"/course/full-stack-typescript/06-imported-resolver/"},"frontmatter":{"title":"Imported Resolver","order":6,"course":"full-stack-typescript","isExercise":null}},"next":{"fields":{"slug":"/course/full-stack-typescript/08-ui-consumes-data/"},"frontmatter":{"title":"UI Consumes Real Data","order":8,"course":"full-stack-typescript","isExercise":null}}}},
    "staticQueryHashes": ["2785745750","2841359383"]}