{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/course/full-stack-typescript/08-ui-consumes-data/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Learn TypeScript w/ Mike North","courses":[{"id":"fundamentals-v3","name":"TypeScript Fundamentals v3","summary":"Learn everything you need to know in order to confidently and successfully use TypeScript to build a modern JavaScript app."},{"id":"fundamentals-v4","name":"TypeScript Fundamentals v4","summary":"Learn everything you need to know in order to confidently and successfully use TypeScript to build a modern JavaScript app."},{"id":"intermediate-v1","name":"Intermediate TypeScript","summary":"Leverage TypeScript's strengths to provide clarity in the face of\ncomplexity, while protecting your codebase and team from it's weaknesses.\n"},{"id":"making-typescript-stick","name":"Making TypeScript Stick","summary":"Tackle a series of challenges designed to reinforce your knowledge and make\nthe important concepts truly \"stick\" in your mind.\n"},{"id":"enterprise-v2","name":"Enterprise TypeScript v2","summary":"Combine TypeScript and GraphQL's type systems to create full-stack, fully\ntype-checked code bases that are shockingly easy to refactor and maintain.\n"},{"id":"full-stack-typescript","name":"Full Stack TypeScript","summary":"Combine TypeScript and GraphQL's type systems to create full-stack, fully\ntype-checked code bases that are shockingly easy to refactor and maintain.\n"},{"id":"intermediate-v2","name":"Intermediate TypeScript","summary":"Leverage TypeScript's strengths to provide clarity in the face of\ncomplexity, while protecting your codebase and team from it's weaknesses.\n"}]}},"markdownRemark":{"id":"7f742435-441f-523c-a082-a7801423a88e","excerpt":"Setting up the apollo client The first thing we’ll need to do is bring the apollo graphql client into the app. Open client/src/index.tsx and\nadd the following…","html":"<h2 id=\"setting-up-the-apollo-client\" style=\"position:relative;\"><a href=\"#setting-up-the-apollo-client\" aria-label=\"setting up the apollo client permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setting up the apollo client</h2>\n<p>The first thing we’ll need to do is bring the apollo graphql client into the app. Open <code>client/src/index.tsx</code> and\nadd the following import</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> {</span></div><div class='line'><span style=\"color: #24292F\">  ApolloClient,</span></div><div class='line'><span style=\"color: #24292F\">  ApolloProvider,</span></div><div class='line'><span style=\"color: #24292F\">  InMemoryCache,</span></div><div class='line'><span style=\"color: #24292F\">} </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">\"@apollo/client\"</span></div></code></div></pre>\n<p>Create an apollo client, immediately after the imports in top-level module scope</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">const</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">client</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">new</span><span style=\"color: #24292F\"> </span><span style=\"color: #8250DF\">ApolloClient</span><span style=\"color: #24292F\">({</span></div><div class='line'><span style=\"color: #24292F\">  uri: </span><span style=\"color: #0A3069\">\"http://localhost:3000/graphql\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">  cache: </span><span style=\"color: #CF222E\">new</span><span style=\"color: #24292F\"> </span><span style=\"color: #8250DF\">InMemoryCache</span><span style=\"color: #24292F\">(),</span></div><div class='line'><span style=\"color: #24292F\">})</span></div></code></div></pre>\n<p>and finally, wrap the <code>&#x3C;App /></code> component with an <code>&#x3C;ApolloProvider></code></p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #116329\">+   &lt;ApolloProvider client={client}&gt;</span></div><div class='line'><span style=\"color: #24292F\">      &lt;App /&gt;</span></div><div class='line'><span style=\"color: #116329\">+   &lt;/ApolloProvider&gt;</span></div></code></div></pre>\n<h2 id=\"our-first-operation\" style=\"position:relative;\"><a href=\"#our-first-operation\" aria-label=\"our first operation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Our first “operation”</h2>\n<p>Open <code>client/src/App.tsx</code> and add these imports</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> { gql } </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">\"@apollo/client\"</span></div><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> { useGetCurrentUserQuery } </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">\"./generated/graphql\"</span></div></code></div></pre>\n<p>You may see some in-editor feedback telling you there’s a problem with <code>'./generated/graphql'</code>. This is normal for now.</p>\n<p>Next, add the following in top-level module scope</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">export</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">const</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">GET_CURRENT_USER</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> </span><span style=\"color: #8250DF\">gql</span><span style=\"color: #0A3069\">`</span></div><div class='line'><span style=\"color: #0A3069\">  query GetCurrentUser {</span></div><div class='line'><span style=\"color: #0A3069\">    currentUser {</span></div><div class='line'><span style=\"color: #0A3069\">      id</span></div><div class='line'><span style=\"color: #0A3069\">      name</span></div><div class='line'><span style=\"color: #0A3069\">      handle</span></div><div class='line'><span style=\"color: #0A3069\">      avatarUrl</span></div><div class='line'><span style=\"color: #0A3069\">      createdAt</span></div><div class='line'><span style=\"color: #0A3069\">    }</span></div><div class='line'><span style=\"color: #0A3069\">    suggestions {</span></div><div class='line'><span style=\"color: #0A3069\">      name</span></div><div class='line'><span style=\"color: #0A3069\">      handle</span></div><div class='line'><span style=\"color: #0A3069\">      avatarUrl</span></div><div class='line'><span style=\"color: #0A3069\">      reason</span></div><div class='line'><span style=\"color: #0A3069\">    }</span></div><div class='line'><span style=\"color: #0A3069\">  }</span></div><div class='line'><span style=\"color: #0A3069\">`</span></div></code></div></pre>\n<p>Inside the component, before the function returns a JSX node, add the following</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">const</span><span style=\"color: #24292F\"> { </span><span style=\"color: #0550AE\">loading</span><span style=\"color: #24292F\">, </span><span style=\"color: #0550AE\">error</span><span style=\"color: #24292F\">, </span><span style=\"color: #0550AE\">data</span><span style=\"color: #24292F\"> } </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> </span><span style=\"color: #8250DF\">useGetCurrentUserQuery</span><span style=\"color: #24292F\">()</span></div><div class='line'><span style=\"color: #CF222E\">if</span><span style=\"color: #24292F\"> (loading) </span><span style=\"color: #CF222E\">return</span><span style=\"color: #24292F\"> &lt;</span><span style=\"color: #953800\">p</span><span style=\"color: #24292F\">&gt;Loading</span><span style=\"color: #CF222E\">...&lt;/</span><span style=\"color: #24292F\">p</span><span style=\"color: #CF222E\">&gt;</span></div><div class='line'><span style=\"color: #CF222E\">if</span><span style=\"color: #24292F\"> (error) </span><span style=\"color: #CF222E\">return</span><span style=\"color: #24292F\"> &lt;</span><span style=\"color: #953800\">p</span><span style=\"color: #24292F\">&gt;</span><span style=\"color: #0550AE\">Error</span><span style=\"color: #24292F\">: {error}</span><span style=\"color: #CF222E\">&lt;/</span><span style=\"color: #24292F\">p</span><span style=\"color: #CF222E\">&gt;</span></div><div class='line'><span style=\"color: #CF222E\">if</span><span style=\"color: #24292F\"> (</span><span style=\"color: #CF222E\">!</span><span style=\"color: #24292F\">data) </span><span style=\"color: #CF222E\">return</span><span style=\"color: #24292F\"> &lt;</span><span style=\"color: #953800\">p</span><span style=\"color: #24292F\">&gt;No data.</span><span style=\"color: #CF222E\">&lt;/</span><span style=\"color: #24292F\">p</span><span style=\"color: #CF222E\">&gt;</span></div><div class='line'><span style=\"color: #CF222E\">const</span><span style=\"color: #24292F\"> { </span><span style=\"color: #0550AE\">currentUser</span><span style=\"color: #24292F\">, </span><span style=\"color: #0550AE\">suggestions</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> [] } </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> data</span></div></code></div></pre>\n<p>And wire up these new pieces of data <code>currentUser</code>, <code>suggestions</code> in two places</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #82071E\">-  &lt;LeftSidebar currentUser={CURRENT_USER} /&gt;</span></div><div class='line'><span style=\"color: #116329\">+  &lt;LeftSidebar currentUser={{...CURRENT_USER, ...currentUser}} /&gt;</span></div></code></div></pre>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #82071E\">-  &lt;RightBar trends={TRENDS} suggestions={SUGGESTIONS} /&gt;</span></div><div class='line'><span style=\"color: #116329\">+  &lt;RightBar trends={TRENDS} suggestions={suggestions} /&gt;</span></div></code></div></pre>\n<p>Finally, it’s time to generate the GraphQL code for the client.\nFrom within the <code>./client</code> folder, run the following command</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">yarn codegen</span></div></code></div></pre>\n<p>You may need to restart your TS server and/or ESLint, but at this point when things settle\nyou should get no type errors</p>\n<p>Now, visit <a href=\"http://localhost:1234\">http://localhost:1234</a> and you should see the twitter UI. You’ll know\nthat your data is coming through because you’ll see two “suggestion” items instead of one</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 772px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a2d64eb9dea575ef8fcd16553c830f1b/940c5/suggestions.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.599999999999994%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABV0lEQVQoz33RTW+CMBjAcb/qDvs4W/Y5dtlpVw9ThroFYhUiTipkMkIsFMW2UFqexdc5M/c/tUl/TfO0BQBN08BZzb8BbA8zxhaLRcu2bcPojscOQsgwjE6nE8cxAGitz43esXXVfBU6FbDZY1mVlOaCb4QQVVUVRVFVFVxJ6YZJXTfAON/i57fk5v7d/WQrSibeFGPs+34QBL7vz2azKIocx3F3YYy11vtb+B7fPU1vHwYDL4+j8NU0R6PRcDj0PM91XcuyEEK9Xq/f71uWFYbhaToHTNZyNM//fGRd10qpi3H+wkKqdM0AII5jjHGSJPP5PAiC5XIJ1zvgFyd67E5WXH5MPdM0HccxDKPdbiOEiqKglOZ5TgjJsowxdvrXA842pY0TIRVAo5Sq6/rwN1pzzsuyFEIwxjjnUspLvMqpKFZZmpL0J0K2u+wYpXS/IMeSJImi6BtjDi61f45z0QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"suggestions\"\n        title=\"suggestions\"\n        src=\"/static/a2d64eb9dea575ef8fcd16553c830f1b/940c5/suggestions.png\"\n        srcset=\"/static/a2d64eb9dea575ef8fcd16553c830f1b/63868/suggestions.png 250w,\n/static/a2d64eb9dea575ef8fcd16553c830f1b/0b533/suggestions.png 500w,\n/static/a2d64eb9dea575ef8fcd16553c830f1b/940c5/suggestions.png 772w\"\n        sizes=\"(max-width: 772px) 100vw, 772px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Clean up any unused imports and variables (e.g., the <code>SUGGESTIONS</code> array in <code>App.tsx</code>) if you like.</p>\n<p>Next, let’s go back to our API, and get some data coming from our database coming all the way through to the UI.</p>","tableOfContents":"<ul>\n<li><a href=\"#setting-up-the-apollo-client\">Setting up the apollo client</a></li>\n<li><a href=\"#our-first-operation\">Our first “operation”</a></li>\n</ul>","fields":{"slug":"/course/full-stack-typescript/08-ui-consumes-data/"},"frontmatter":{"title":"UI Consumes Real Data","course":"full-stack-typescript","date":"March 24, 2022","description":"Now that we have a GraphQL API up and running, let's actually bring it into our React app!\n"}}},"pageContext":{"slug":"/course/full-stack-typescript/08-ui-consumes-data/","title":"UI Consumes Real Data","course":"full-stack-typescript","order":8,"previous":{"fields":{"slug":"/course/full-stack-typescript/07-imported-resolver/"},"frontmatter":{"title":"Typed Resolver","order":7,"course":"full-stack-typescript","isExercise":null}},"next":{"fields":{"slug":"/course/full-stack-typescript/09-ui-consumes-data/"},"frontmatter":{"title":"Data from the database","order":9,"course":"full-stack-typescript","isExercise":null}}}},
    "staticQueryHashes": ["2785745750","2841359383"]}