{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/course/enterprise-v2/02-ts-library-zero-to-one/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Learn TypeScript w/ Mike North","courses":[{"id":"fundamentals-v3","name":"TypeScript Fundamentals v3","summary":"Learn everything you need to know in order to confidently and successfully use TypeScript to build a modern JavaScript app."},{"id":"fundamentals-v4","name":"TypeScript Fundamentals v4","summary":"Learn everything you need to know in order to confidently and successfully use TypeScript to build a modern JavaScript app."},{"id":"intermediate-v1","name":"Intermediate TypeScript v1","summary":"Leverage TypeScript's strengths to provide clarity in the face of\ncomplexity, while protecting your codebase and team from it's weaknesses.\n"},{"id":"intermediate-v2","name":"Intermediate TypeScript v2","summary":"Leverage TypeScript's strengths to provide clarity in the face of\ncomplexity, while protecting your codebase and team from it's weaknesses.\n"},{"id":"making-typescript-stick","name":"Making TypeScript Stick","summary":"Tackle a series of challenges designed to reinforce your knowledge and make\nthe important concepts truly \"stick\" in your mind.\n"},{"id":"enterprise-v2","name":"Enterprise TypeScript v2","summary":"Combine TypeScript and GraphQL's type systems to create full-stack, fully\ntype-checked code bases that are shockingly easy to refactor and maintain.\n"},{"id":"full-stack-typescript","name":"Full Stack TypeScript","summary":"Combine TypeScript and GraphQL's type systems to create full-stack, fully\ntype-checked code bases that are shockingly easy to refactor and maintain.\n"}]}},"markdownRemark":{"id":"7a5d8ed7-a639-5277-b032-31ab9d283737","excerpt":"A “bare bones” TypeScript Library Setup Let’s start by creating new small library from nothing, so you can see how Mike’s “lots of value out of few tools…","html":"<h2 id=\"a-bare-bones-typescript-library-setup\" style=\"position:relative;\"><a href=\"#a-bare-bones-typescript-library-setup\" aria-label=\"a bare bones typescript library setup permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>A “bare bones” TypeScript Library Setup</h2>\n<p>Let’s start by creating new small library from nothing, so you can see how Mike’s “lots of value out of few tools” approach keeps things nice and simple.</p>\n<h2 id=\"getting-started\" style=\"position:relative;\"><a href=\"#getting-started\" aria-label=\"getting started permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Getting Started</h2>\n<p>First, create a new directory and enter it</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">mkdir my-lib</span></div><div class='line'><span style=\"color: #0550AE\">cd</span><span style=\"color: #24292F\"> my-lib</span></div></code></div></pre>\n<p>Then, create a <code>.gitignore</code> file</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">npx gitignore node</span></div></code></div></pre>\n<p>and a package.json file</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">yarn init --yes</span></div><div class='line'><span style=\"color: #24292F\">yarn config </span><span style=\"color: #0550AE\">set</span><span style=\"color: #24292F\"> nodeLinker node-modules</span></div></code></div></pre>\n<p>Make a few direct modifications to your <code>package.json</code> file as follows</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\"> {</span></div><div class='line'><span style=\"color: #24292F\">   \"name\": \"my-lib\",</span></div><div class='line'><span style=\"color: #24292F\">   \"version\": \"1.0.0\",</span></div><div class='line'><span style=\"color: #82071E\">-  \"main\": \"index.js\",</span></div><div class='line'><span style=\"color: #116329\">+  \"main\": \"dist/index.js\",</span></div><div class='line'><span style=\"color: #116329\">+  \"types\": \"dist/index.d.ts\",</span></div><div class='line'><span style=\"color: #116329\">+  \"scripts\": {</span></div><div class='line'><span style=\"color: #116329\">+    \"build\": \"yarn tsc\",</span></div><div class='line'><span style=\"color: #116329\">+    \"dev\": \"yarn build --watch --preserveWatchOutput\",</span></div><div class='line'><span style=\"color: #116329\">+    \"lint\": \"yarn eslint src --ext js,ts\",</span></div><div class='line'><span style=\"color: #116329\">+    \"test\": \"yarn jest\"</span></div><div class='line'><span style=\"color: #116329\">+  },</span></div><div class='line'><span style=\"color: #24292F\">   \"license\": \"MIT\"</span></div><div class='line'><span style=\"color: #24292F\"> }</span></div></code></div></pre>\n<p>This ensures that TS and non-TS consumers alike can use this library, and that we can run the following commands</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">yarn build   </span><span style=\"color: #6E7781\"># build the project</span></div><div class='line'><span style=\"color: #24292F\">yarn dev     </span><span style=\"color: #6E7781\"># build, and rebuild when source is changed</span></div><div class='line'><span style=\"color: #24292F\">yarn lint    </span><span style=\"color: #6E7781\"># run linting</span></div><div class='line'><span style=\"color: #24292F\">yarn </span><span style=\"color: #0550AE\">test</span><span style=\"color: #24292F\">    </span><span style=\"color: #6E7781\"># run tests</span></div></code></div></pre>\n<p>Pin the node and yarn versions to their current stable releases using volta</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">volta pin node@lts yarn@^3</span></div></code></div></pre>\n<p>this will add <code>node</code> and <code>yarn</code> versions to your <code>package.json</code> automatically. Note that we’re using an LTS version of <code>node</code>, which is what the Node.js project tells us to do</p>\n<blockquote>\n<p>LTS release status is “long-term support”, which typically guarantees that critical bugs will be fixed for a total of 30 months. <strong>Production applications should only use Active LTS or Maintenance LTS releases.</strong></p>\n</blockquote>\n<p>Source: <a href=\"https://nodejs.dev/en/about/releases/\">nodejs.dev/en/about/releases/</a></p>\n<h2 id=\"typescript-compiler\" style=\"position:relative;\"><a href=\"#typescript-compiler\" aria-label=\"typescript compiler permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TypeScript Compiler</h2>\n<p>Install typescript as a <code>devDependency</code>, which establishes two important things</p>\n<ul>\n<li>TypeScript is included at build time, and not packaged with the library as a runtime dependency</li>\n<li>Consumers of this library do not need to use the same version of TypeScript being used to build this library. They don’t necessarily need to use TypeScript at all.</li>\n</ul>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">yarn add -D typescript</span></div></code></div></pre>\n<h2 id=\"setting-up-your-tsconfig\" style=\"position:relative;\"><a href=\"#setting-up-your-tsconfig\" aria-label=\"setting up your tsconfig permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setting up your tsconfig</h2>\n<p>Create a default <code>tsconfig.json</code></p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">yarn tsc --init</span></div></code></div></pre>\n<p>and ensure the following values are set:</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">  \"compilerOptions\": {</span></div><div class='line'><span style=\"color: #116329\">+   \"outDir\": \"dist\",</span></div><div class='line'><span style=\"color: #116329\">+   \"rootDir\": \"src\",</span></div><div class='line'><span style=\"color: #24292F\">  },</span></div><div class='line'><span style=\"color: #116329\">+ \"include\": [\"src\"]</span></div></code></div></pre>\n<p>We want to make sure that the <code>src/</code> folder is where our source code lives, that it’s treated as a root directory, and that the compiled output is in the <code>dist/</code> folder.</p>\n<p>Next, make sure that the TS compiler creates Node-friendly CommonJS modules, and that we target the ES2018 language level (Node 10, allowing for features like <code>async</code> and <code>await</code>).</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">  \"compilerOptions\": {</span></div><div class='line'><span style=\"color: #116329\">+   \"module\": \"commonjs\",</span></div><div class='line'><span style=\"color: #116329\">+   \"target\": \"ES2022\",</span></div><div class='line'><span style=\"color: #24292F\">  }</span></div></code></div></pre>\n<p>Let’s make sure two potentially problematic features are <em>disabled</em>. We’ll talk later about why these are not great for a library.</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">  \"compilerOptions\": {</span></div><div class='line'><span style=\"color: #116329\">+   \"esModuleInterop\": false,</span></div><div class='line'><span style=\"color: #116329\">+   \"skipLibCheck\": false</span></div><div class='line'><span style=\"color: #24292F\">  }</span></div></code></div></pre>\n<p>Make sure that the compiler outputs ambient type information in addition to the JavaScript</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">  \"compilerOptions\": {</span></div><div class='line'><span style=\"color: #116329\">+   \"declaration\": true,</span></div><div class='line'><span style=\"color: #24292F\">  }</span></div></code></div></pre>\n<p>And finally, let’s make sure that we set up an “extra strict” type-checking configuration</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">  \"compilerOptions\": {</span></div><div class='line'><span style=\"color: #24292F\">   /**</span></div><div class='line'><span style=\"color: #24292F\">    * \"strict\": true,</span></div><div class='line'><span style=\"color: #24292F\">    * -------------------</span></div><div class='line'><span style=\"color: #24292F\">    * - noImplicitAny</span></div><div class='line'><span style=\"color: #24292F\">    * - strictNullChecks</span></div><div class='line'><span style=\"color: #24292F\">    * - strictFunctionTypes</span></div><div class='line'><span style=\"color: #24292F\">    * - strictBindCallApply</span></div><div class='line'><span style=\"color: #24292F\">    * - strictPropertyInitialization</span></div><div class='line'><span style=\"color: #24292F\">    * - noImplicitThis</span></div><div class='line'><span style=\"color: #24292F\">    * - alwaysStrict</span></div><div class='line'><span style=\"color: #24292F\">    */</span></div><div class='line'><span style=\"color: #116329\">+   \"strict\": true,</span></div><div class='line'><span style=\"color: #116329\">+   \"noUnusedLocals\": true,</span></div><div class='line'><span style=\"color: #116329\">+   \"noImplicitReturns\": true,</span></div><div class='line'><span style=\"color: #116329\">+   \"stripInternal\": true,</span></div><div class='line'><span style=\"color: #116329\">+   \"types\": [],</span></div><div class='line'><span style=\"color: #116329\">+   \"forceConsistentCasingInFileNames\": true,</span></div><div class='line'><span style=\"color: #116329\">+   \"exactOptionalPropertyTypes\": true,</span></div><div class='line'><span style=\"color: #116329\">+   \"noImplicitReturns\": true,</span></div><div class='line'><span style=\"color: #116329\">+   \"noUncheckedIndexedAccess\": true,                </span></div><div class='line'><span style=\"color: #116329\">+   \"noImplicitOverride\": true,                      </span></div><div class='line'><span style=\"color: #116329\">+   \"noPropertyAccessFromIndexSignature\": true,      </span></div><div class='line'></div><div class='line'><span style=\"color: #24292F\">  }</span></div></code></div></pre>\n<p>We’ll go in to more detail later about what some of these options mean, and why I suggest setting them this way.</p>\n<p>Finally, please create a folder for your source code, and create an empty <code>index.ts</code> file within it</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">mkdir src</span></div><div class='line'><span style=\"color: #24292F\">touch src/index.ts</span></div></code></div></pre>\n<p>Open <code>src/index.ts</code> and set its contents to the following</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #6E7781\">/**</span></div><div class='line'><span style=\"color: #6E7781\"> * </span><span style=\"color: #CF222E\">@packageDocumentation</span><span style=\"color: #6E7781\"> A small library for common math functions</span></div><div class='line'><span style=\"color: #6E7781\"> */</span></div><div class='line'></div><div class='line'><span style=\"color: #6E7781\">/**</span></div><div class='line'><span style=\"color: #6E7781\"> * Calculate the average of three numbers</span></div><div class='line'><span style=\"color: #6E7781\"> *</span></div><div class='line'><span style=\"color: #6E7781\"> * </span><span style=\"color: #CF222E\">@param</span><span style=\"color: #6E7781\"> </span><span style=\"color: #24292F\">a</span><span style=\"color: #6E7781\"> - first number</span></div><div class='line'><span style=\"color: #6E7781\"> * </span><span style=\"color: #CF222E\">@param</span><span style=\"color: #6E7781\"> </span><span style=\"color: #24292F\">b</span><span style=\"color: #6E7781\"> - second number</span></div><div class='line'><span style=\"color: #6E7781\"> * </span><span style=\"color: #CF222E\">@param</span><span style=\"color: #6E7781\"> </span><span style=\"color: #24292F\">c</span><span style=\"color: #6E7781\"> - third number</span></div><div class='line'><span style=\"color: #6E7781\"> *</span></div><div class='line'><span style=\"color: #6E7781\"> * </span><span style=\"color: #CF222E\">@public</span></div><div class='line'><span style=\"color: #6E7781\"> */</span></div><div class='line'><span style=\"color: #CF222E\">export</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">function</span><span style=\"color: #24292F\"> </span><span style=\"color: #8250DF\">avg</span><span style=\"color: #24292F\">(</span><span style=\"color: #953800\">a</span><span style=\"color: #CF222E\">:</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">number</span><span style=\"color: #24292F\">, </span><span style=\"color: #953800\">b</span><span style=\"color: #CF222E\">:</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">number</span><span style=\"color: #24292F\">, </span><span style=\"color: #953800\">c</span><span style=\"color: #CF222E\">:</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">number</span><span style=\"color: #24292F\">)</span><span style=\"color: #CF222E\">:</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">number</span><span style=\"color: #24292F\"> {</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #CF222E\">return</span><span style=\"color: #24292F\"> </span><span style=\"color: #8250DF\">sum3</span><span style=\"color: #24292F\">(a, b, c) </span><span style=\"color: #CF222E\">/</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">3</span><span style=\"color: #24292F\">;</span></div><div class='line'><span style=\"color: #24292F\">}</span></div><div class='line'></div><div class='line'><span style=\"color: #6E7781\">/**</span></div><div class='line'><span style=\"color: #6E7781\"> * Calculate the sum of three numbers</span></div><div class='line'><span style=\"color: #6E7781\"> *</span></div><div class='line'><span style=\"color: #6E7781\"> * </span><span style=\"color: #CF222E\">@param</span><span style=\"color: #6E7781\"> </span><span style=\"color: #24292F\">a</span><span style=\"color: #6E7781\"> - first number</span></div><div class='line'><span style=\"color: #6E7781\"> * </span><span style=\"color: #CF222E\">@param</span><span style=\"color: #6E7781\"> </span><span style=\"color: #24292F\">b</span><span style=\"color: #6E7781\"> - second number</span></div><div class='line'><span style=\"color: #6E7781\"> * </span><span style=\"color: #CF222E\">@param</span><span style=\"color: #6E7781\"> </span><span style=\"color: #24292F\">c</span><span style=\"color: #6E7781\"> - third number</span></div><div class='line'><span style=\"color: #6E7781\"> *</span></div><div class='line'><span style=\"color: #6E7781\"> * </span><span style=\"color: #CF222E\">@beta</span></div><div class='line'><span style=\"color: #6E7781\"> */</span></div><div class='line'><span style=\"color: #CF222E\">export</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">function</span><span style=\"color: #24292F\"> </span><span style=\"color: #8250DF\">sum3</span><span style=\"color: #24292F\">(</span><span style=\"color: #953800\">a</span><span style=\"color: #CF222E\">:</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">number</span><span style=\"color: #24292F\">, </span><span style=\"color: #953800\">b</span><span style=\"color: #CF222E\">:</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">number</span><span style=\"color: #24292F\">, </span><span style=\"color: #953800\">c</span><span style=\"color: #CF222E\">:</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">number</span><span style=\"color: #24292F\">)</span><span style=\"color: #CF222E\">:</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">number</span><span style=\"color: #24292F\"> {</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #CF222E\">return</span><span style=\"color: #24292F\"> </span><span style=\"color: #8250DF\">sum2</span><span style=\"color: #24292F\">(a, </span><span style=\"color: #8250DF\">sum2</span><span style=\"color: #24292F\">(b, c));</span></div><div class='line'><span style=\"color: #24292F\">}</span></div><div class='line'></div><div class='line'><span style=\"color: #6E7781\">/**</span></div><div class='line'><span style=\"color: #6E7781\"> * Calculate the sum of two numbers</span></div><div class='line'><span style=\"color: #6E7781\"> *</span></div><div class='line'><span style=\"color: #6E7781\"> * </span><span style=\"color: #CF222E\">@param</span><span style=\"color: #6E7781\"> </span><span style=\"color: #24292F\">a</span><span style=\"color: #6E7781\"> - first number</span></div><div class='line'><span style=\"color: #6E7781\"> * </span><span style=\"color: #CF222E\">@param</span><span style=\"color: #6E7781\"> </span><span style=\"color: #24292F\">b</span><span style=\"color: #6E7781\"> - second number</span></div><div class='line'><span style=\"color: #6E7781\"> *</span></div><div class='line'><span style=\"color: #6E7781\"> * </span><span style=\"color: #CF222E\">@internal</span></div><div class='line'><span style=\"color: #6E7781\"> */</span></div><div class='line'><span style=\"color: #CF222E\">export</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">function</span><span style=\"color: #24292F\"> </span><span style=\"color: #8250DF\">sum2</span><span style=\"color: #24292F\">(</span><span style=\"color: #953800\">a</span><span style=\"color: #CF222E\">:</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">number</span><span style=\"color: #24292F\">, </span><span style=\"color: #953800\">b</span><span style=\"color: #CF222E\">:</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">number</span><span style=\"color: #24292F\">)</span><span style=\"color: #CF222E\">:</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">number</span><span style=\"color: #24292F\"> {</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #CF222E\">const</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">sum</span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> a </span><span style=\"color: #CF222E\">+</span><span style=\"color: #24292F\"> b;</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #CF222E\">return</span><span style=\"color: #24292F\"> sum;</span></div><div class='line'><span style=\"color: #24292F\">}</span></div></code></div></pre>\n<p>This is obviously convoluted, but it’ll serve our purposes for looking at some interesting behavior later.</p>\n<p>Let’s make sure that things are working so far by trying to build this project.</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">rm -rf dist    </span><span style=\"color: #6E7781\"># clear away any old compiled output</span></div><div class='line'><span style=\"color: #24292F\">yarn build     </span><span style=\"color: #6E7781\"># build the project</span></div><div class='line'><span style=\"color: #24292F\">ls dist        </span><span style=\"color: #6E7781\"># list the contents of the dist/ folder</span></div></code></div></pre>\n<p>You should see something like</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">index.d.ts index.js</span></div></code></div></pre>\n<p>Make a commit! We have working build script.</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">git add -A </span><span style=\"color: #0550AE\">.</span></div><div class='line'><span style=\"color: #24292F\">git commit -m </span><span style=\"color: #0A3069\">\"Build is working\"</span></div></code></div></pre>\n<h2 id=\"linting\" style=\"position:relative;\"><a href=\"#linting\" aria-label=\"linting permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Linting</h2>\n<p>Install eslint as a development dependency</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">yarn add -D eslint</span></div></code></div></pre>\n<p>and go through the process of creating a starting point ESLint config file</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">yarn eslint --init</span></div></code></div></pre>\n<p>When asked, please answer as follows for the choices presented to you:</p>\n<dl>\n    <dt>How would you like to use ESLint?</dt>\n    <dd>To check syntax and find problems</dd>\n    <dt>What type of modules does your project use</dt>\n    <dd>None of these</dd>\n    <dt>Which framework does your project use?</dt>\n    <dd>None of these</dd>\n    <dt>Does your project use TypeScript?</dt>\n    <dd>Yes</dd>\n    <dt>Where does your code run?</dt>\n    <dd>Node</dd>\n    <dt>What format do you want your config file to be in?</dt>\n    <dd>JSON</dd>\n    <dt>Would you like to install them now?</dt>\n    <dd>Yes</dd>\n    <dt>Which package manager are you using?</dt>\n    <dd>yarn</dd>\n</dl>\n<p>Let’s also enable a set of rules that take advantage of type-checking information</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #82071E\">--- a/.eslintrc.json</span></div><div class='line'><span style=\"color: #116329\">+++ b/.eslintrc.json</span></div><div class='line'><span style=\"color: #8250DF\">@@ -5,7 +5,8 @@</span></div><div class='line'><span style=\"color: #24292F\">   },</span></div><div class='line'><span style=\"color: #24292F\">   \"extends\": [</span></div><div class='line'><span style=\"color: #24292F\">     \"eslint:recommended\",</span></div><div class='line'><span style=\"color: #82071E\">-    \"plugin:@typescript-eslint/recommended\"</span></div><div class='line'><span style=\"color: #116329\">+    \"plugin:@typescript-eslint/recommended\",</span></div><div class='line'><span style=\"color: #116329\">+    \"plugin:@typescript-eslint/recommended-requiring-type-checking\"</span></div><div class='line'><span style=\"color: #24292F\">   ],</span></div><div class='line'><span style=\"color: #24292F\">   \"parser\": \"@typescript-eslint/parser\",</span></div></code></div></pre>\n<p>There’s one rule we want to enable, and that’s a preference for <code>const</code> over <code>let</code>. While we’re here,\nwe can disable ESLint’s rules for unused local variables and params, because the TS\ncompiler is responsible for telling us about those</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #82071E\">--- a/.eslintrc.json</span></div><div class='line'><span style=\"color: #116329\">+++ b/.eslintrc.json</span></div><div class='line'><span style=\"color: #8250DF\">@@ -14,5 +14,6 @@</span></div><div class='line'><span style=\"color: #24292F\">   },</span></div><div class='line'><span style=\"color: #24292F\">   \"plugins\": [\"@typescript-eslint\"],</span></div><div class='line'><span style=\"color: #24292F\">   \"rules\": {</span></div><div class='line'><span style=\"color: #116329\">+    \"prefer-const\": \"error\",</span></div><div class='line'><span style=\"color: #116329\">+    \"@typescript-eslint/no-unused-vars\": \"off\",</span></div><div class='line'><span style=\"color: #116329\">+    \"@typescript-eslint/no-unused-params\": \"off\"</span></div><div class='line'><span style=\"color: #24292F\">   }</span></div><div class='line'><span style=\"color: #24292F\"> }</span></div></code></div></pre>\n<p>ESLint needs a single tsconfig file that includes our entire project (including tests), so we’ll need to make a small dedicated one</p>\n<h3 id=\"tsconfigeslintjson\" style=\"position:relative;\"><a href=\"#tsconfigeslintjson\" aria-label=\"tsconfigeslintjson permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code>/tsconfig.eslint.json</code></h3>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">json</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">{</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0550AE\">\"extends\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"./tsconfig.json\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0550AE\">\"compilerOptions\"</span><span style=\"color: #24292F\">: {</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0550AE\">\"types\"</span><span style=\"color: #24292F\">: [</span><span style=\"color: #0A3069\">\"jest\"</span><span style=\"color: #24292F\">]</span></div><div class='line'><span style=\"color: #24292F\">  },</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0550AE\">\"include\"</span><span style=\"color: #24292F\">: [</span><span style=\"color: #0A3069\">\"src\"</span><span style=\"color: #24292F\">, </span><span style=\"color: #0A3069\">\"tests\"</span><span style=\"color: #24292F\">]</span></div><div class='line'><span style=\"color: #24292F\">}</span></div></code></div></pre>\n<p>Going back to our <code>/.eslintrc.json</code>, we need to tell ESLint about this new TS config — rules that require type-checking need to know about where it is</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #82071E\">--- a/.eslintrc.json</span></div><div class='line'><span style=\"color: #116329\">+++ b/.eslintrc.json</span></div><div class='line'><span style=\"color: #8250DF\">@@ -4,14 +4,17 @@</span></div><div class='line'><span style=\"color: #24292F\">   \"parserOptions\": {</span></div><div class='line'><span style=\"color: #82071E\">-    \"ecmaVersion\": 12</span></div><div class='line'><span style=\"color: #116329\">+    \"ecmaVersion\": 12,</span></div><div class='line'><span style=\"color: #116329\">+    \"project\": \"tsconfig.eslint.json\"</span></div><div class='line'><span style=\"color: #24292F\">   },</span></div><div class='line'></div><div class='line'><span style=\"color: #24292F\"> }</span></div></code></div></pre>\n<p>While we’re in here, let’s set up some different rules for our\ntest files compared to our source files</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #82071E\">--- a/.eslintrc.json</span></div><div class='line'><span style=\"color: #116329\">+++ b/.eslintrc.json</span></div><div class='line'><span style=\"color: #8250DF\">@@ -15,5 +15,11 @@</span></div><div class='line'><span style=\"color: #24292F\">   \"plugins\": [\"@typescript-eslint\"],</span></div><div class='line'><span style=\"color: #24292F\">   \"rules\": {</span></div><div class='line'><span style=\"color: #24292F\">     \"prefer-const\": \"error\"</span></div><div class='line'><span style=\"color: #82071E\">-  }</span></div><div class='line'><span style=\"color: #116329\">+  },</span></div><div class='line'><span style=\"color: #116329\">+  \"overrides\": [</span></div><div class='line'><span style=\"color: #116329\">+    {</span></div><div class='line'><span style=\"color: #116329\">+      \"files\": \"tests/**/*.ts\",</span></div><div class='line'><span style=\"color: #116329\">+      \"env\": { \"node\": true, \"jest\": true }</span></div><div class='line'><span style=\"color: #116329\">+    }</span></div><div class='line'><span style=\"color: #116329\">+  ]</span></div><div class='line'><span style=\"color: #24292F\"> }</span></div></code></div></pre>\n<p>Let’s make sure this works by making a change to our <code>src/index.ts</code> that breaks our <code>prefer-const</code> rule</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #82071E\">--- a/src/index.ts</span></div><div class='line'><span style=\"color: #116329\">+++ b/src/index.ts</span></div><div class='line'><span style=\"color: #8250DF\">@@ -33,5 +33,6 @@</span><span style=\"color: #24292F\"> export function sum3(a: number, b: number, c: number): number {</span></div><div class='line'><span style=\"color: #24292F\">  * @internal</span></div><div class='line'><span style=\"color: #24292F\">  */</span></div><div class='line'><span style=\"color: #24292F\"> export function sum2(a: number, b: number): number {</span></div><div class='line'><span style=\"color: #82071E\">-  return a + b;</span></div><div class='line'><span style=\"color: #116329\">+  let sum = a + b;</span></div><div class='line'><span style=\"color: #116329\">+  return sum;</span></div><div class='line'><span style=\"color: #24292F\"> }</span></div></code></div></pre>\n<p>running</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">yarn lint</span></div></code></div></pre>\n<p>should tell us that this is a problem. If properly configured, you may also see feedback right in your code editor as well</p>\n<p><img src=\"img/eslint-error.png\" alt=\"eslint error\"></p>\n<p>Undo the problematic code change, run <code>yarn lint</code> again and you should see no errors</p>\n<p>Make a commit! We have working lint command.</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">git add -A </span><span style=\"color: #0550AE\">.</span></div><div class='line'><span style=\"color: #24292F\">git commit -m </span><span style=\"color: #0A3069\">\"Linting with ESLint is working\"</span></div></code></div></pre>\n<h2 id=\"testing\" style=\"position:relative;\"><a href=\"#testing\" aria-label=\"testing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Testing</h2>\n<p>Next, let’s install our test runner, and associated type information, along with some required babel plugins</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">yarn add -D jest @types/jest @babel/core @babel/preset-env @babel/preset-typescript</span></div></code></div></pre>\n<p>and make a folder for our tests</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">mkdir tests</span></div></code></div></pre>\n<p>Create a file to contain the tests for our <code>src/index.ts</code> module</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">touch tests/index.test.ts</span></div></code></div></pre>\n<h3 id=\"testsindextestts\" style=\"position:relative;\"><a href=\"#testsindextestts\" aria-label=\"testsindextestts permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code>tests/index.test.ts</code></h3>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">import</span><span style=\"color: #24292F\"> { avg, sum3 } </span><span style=\"color: #CF222E\">from</span><span style=\"color: #24292F\"> </span><span style=\"color: #0A3069\">'..'</span><span style=\"color: #24292F\">;</span></div><div class='line'></div><div class='line'><span style=\"color: #8250DF\">describe</span><span style=\"color: #24292F\">(</span><span style=\"color: #0A3069\">'avg should calculate an average properly'</span><span style=\"color: #24292F\">, () </span><span style=\"color: #CF222E\">=&gt;</span><span style=\"color: #24292F\"> {</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #8250DF\">test</span><span style=\"color: #24292F\">(</span><span style=\"color: #0A3069\">'three positive numbers'</span><span style=\"color: #24292F\">, () </span><span style=\"color: #CF222E\">=&gt;</span><span style=\"color: #24292F\"> {</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #8250DF\">expect</span><span style=\"color: #24292F\">(</span><span style=\"color: #8250DF\">avg</span><span style=\"color: #24292F\">(</span><span style=\"color: #0550AE\">3</span><span style=\"color: #24292F\">, </span><span style=\"color: #0550AE\">4</span><span style=\"color: #24292F\">, </span><span style=\"color: #0550AE\">5</span><span style=\"color: #24292F\">)).</span><span style=\"color: #8250DF\">toBe</span><span style=\"color: #24292F\">(</span><span style=\"color: #0550AE\">4</span><span style=\"color: #24292F\">);</span></div><div class='line'><span style=\"color: #24292F\">  });</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #8250DF\">test</span><span style=\"color: #24292F\">(</span><span style=\"color: #0A3069\">'three negative numbers'</span><span style=\"color: #24292F\">, () </span><span style=\"color: #CF222E\">=&gt;</span><span style=\"color: #24292F\"> {</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #8250DF\">expect</span><span style=\"color: #24292F\">(</span><span style=\"color: #8250DF\">avg</span><span style=\"color: #24292F\">(</span><span style=\"color: #0550AE\">3</span><span style=\"color: #24292F\">, </span><span style=\"color: #CF222E\">-</span><span style=\"color: #0550AE\">4</span><span style=\"color: #24292F\">, </span><span style=\"color: #CF222E\">-</span><span style=\"color: #0550AE\">5</span><span style=\"color: #24292F\">)).</span><span style=\"color: #8250DF\">toBe</span><span style=\"color: #24292F\">(</span><span style=\"color: #CF222E\">-</span><span style=\"color: #0550AE\">2</span><span style=\"color: #24292F\">);</span></div><div class='line'><span style=\"color: #24292F\">  });</span></div><div class='line'><span style=\"color: #24292F\">});</span></div><div class='line'></div><div class='line'><span style=\"color: #8250DF\">describe</span><span style=\"color: #24292F\">(</span><span style=\"color: #0A3069\">'sum3 should calculate a sum properly'</span><span style=\"color: #24292F\">, () </span><span style=\"color: #CF222E\">=&gt;</span><span style=\"color: #24292F\"> {</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #8250DF\">test</span><span style=\"color: #24292F\">(</span><span style=\"color: #0A3069\">'three positive numbers'</span><span style=\"color: #24292F\">, () </span><span style=\"color: #CF222E\">=&gt;</span><span style=\"color: #24292F\"> {</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #8250DF\">expect</span><span style=\"color: #24292F\">(</span><span style=\"color: #8250DF\">sum3</span><span style=\"color: #24292F\">(</span><span style=\"color: #0550AE\">3</span><span style=\"color: #24292F\">, </span><span style=\"color: #0550AE\">4</span><span style=\"color: #24292F\">, </span><span style=\"color: #0550AE\">5</span><span style=\"color: #24292F\">)).</span><span style=\"color: #8250DF\">toBe</span><span style=\"color: #24292F\">(</span><span style=\"color: #0550AE\">12</span><span style=\"color: #24292F\">);</span></div><div class='line'><span style=\"color: #24292F\">  });</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #8250DF\">test</span><span style=\"color: #24292F\">(</span><span style=\"color: #0A3069\">'three negative numbers'</span><span style=\"color: #24292F\">, () </span><span style=\"color: #CF222E\">=&gt;</span><span style=\"color: #24292F\"> {</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #8250DF\">expect</span><span style=\"color: #24292F\">(</span><span style=\"color: #8250DF\">sum3</span><span style=\"color: #24292F\">(</span><span style=\"color: #0550AE\">3</span><span style=\"color: #24292F\">, </span><span style=\"color: #CF222E\">-</span><span style=\"color: #0550AE\">4</span><span style=\"color: #24292F\">, </span><span style=\"color: #CF222E\">-</span><span style=\"color: #0550AE\">5</span><span style=\"color: #24292F\">)).</span><span style=\"color: #8250DF\">toBe</span><span style=\"color: #24292F\">(</span><span style=\"color: #CF222E\">-</span><span style=\"color: #0550AE\">6</span><span style=\"color: #24292F\">);</span></div><div class='line'><span style=\"color: #24292F\">  });</span></div><div class='line'><span style=\"color: #24292F\">});</span></div></code></div></pre>\n<p>We’ll need to make a one-line change in our existing <code>/tsconfig.json</code> file</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #82071E\">--- a/tsconfig.json</span></div><div class='line'><span style=\"color: #116329\">+++ b/tsconfig.json</span></div><div class='line'><span style=\"color: #8250DF\">@@ -1,4 +1,5 @@</span></div><div class='line'><span style=\"color: #24292F\"> {</span></div><div class='line'><span style=\"color: #24292F\">   \"compilerOptions\": {</span></div><div class='line'><span style=\"color: #116329\">+    \"composite\": true,</span></div></code></div></pre>\n<p>and to create a small <code>tests/tsconfig.json</code> just for our tests</p>\n<h3 id=\"teststsconfigjson\" style=\"position:relative;\"><a href=\"#teststsconfigjson\" aria-label=\"teststsconfigjson permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code>tests/tsconfig.json</code></h3>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">json</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">{</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0550AE\">\"extends\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"../tsconfig.json\"</span><span style=\"color: #24292F\">,</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0550AE\">\"references\"</span><span style=\"color: #24292F\">: [{ </span><span style=\"color: #0550AE\">\"name\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"my-lib\"</span><span style=\"color: #24292F\">, </span><span style=\"color: #0550AE\">\"path\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"..\"</span><span style=\"color: #24292F\"> }],</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0550AE\">\"compilerOptions\"</span><span style=\"color: #24292F\">: {</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0550AE\">\"types\"</span><span style=\"color: #24292F\">: [</span><span style=\"color: #0A3069\">\"jest\"</span><span style=\"color: #24292F\">],</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0550AE\">\"rootDir\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"..\"</span></div><div class='line'><span style=\"color: #24292F\">  },</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0550AE\">\"include\"</span><span style=\"color: #24292F\">: [</span><span style=\"color: #0A3069\">\".\"</span><span style=\"color: #24292F\">]</span></div><div class='line'><span style=\"color: #24292F\">}</span></div></code></div></pre>\n<p>and a small little babel config at the root of our project, so that Jest can understand TypeScript</p>\n<h3 id=\"babelrc\" style=\"position:relative;\"><a href=\"#babelrc\" aria-label=\"babelrc permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code>.babelrc</code></h3>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">json</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">{</span></div><div class='line'><span style=\"color: #24292F\">  </span><span style=\"color: #0550AE\">\"presets\"</span><span style=\"color: #24292F\">: [</span></div><div class='line'><span style=\"color: #24292F\">    [</span><span style=\"color: #0A3069\">\"@babel/preset-env\"</span><span style=\"color: #24292F\">, { </span><span style=\"color: #0550AE\">\"targets\"</span><span style=\"color: #24292F\">: { </span><span style=\"color: #0550AE\">\"node\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0A3069\">\"10\"</span><span style=\"color: #24292F\"> } }],</span></div><div class='line'><span style=\"color: #24292F\">    </span><span style=\"color: #0A3069\">\"@babel/preset-typescript\"</span></div><div class='line'><span style=\"color: #24292F\">  ]</span></div><div class='line'><span style=\"color: #24292F\">}</span></div></code></div></pre>\n<h3 id=\"take-it-for-a-spin\" style=\"position:relative;\"><a href=\"#take-it-for-a-spin\" aria-label=\"take it for a spin permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Take it for a spin</h3>\n<p>At this point, we should make sure that everything works as intended before proceeding further.</p>\n<p>Run</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">yarn </span><span style=\"color: #0550AE\">test</span></div></code></div></pre>\n<p>to run the tests with jest. You should see some output like</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\"> PASS  tests/index.test.ts</span></div><div class='line'><span style=\"color: #24292F\">  avg should calculate an average properly</span></div><div class='line'><span style=\"color: #24292F\">    ✓ three positive numbers (2 ms)</span></div><div class='line'><span style=\"color: #24292F\">    ✓ three negative numbers</span></div><div class='line'><span style=\"color: #24292F\">  sum3 should calculate a sum properly</span></div><div class='line'><span style=\"color: #24292F\">    ✓ three positive numbers</span></div><div class='line'><span style=\"color: #24292F\">    ✓ three negative numbers</span></div><div class='line'></div><div class='line'><span style=\"color: #24292F\">Test Suites: 1 passed, 1 total</span></div><div class='line'><span style=\"color: #24292F\">Tests:       4 passed, 4 total</span></div><div class='line'><span style=\"color: #24292F\">Snapshots:   0 total</span></div><div class='line'><span style=\"color: #24292F\">Time:        1.125 s</span></div><div class='line'><span style=\"color: #24292F\">Ran all </span><span style=\"color: #0550AE\">test</span><span style=\"color: #24292F\"> suites.</span></div><div class='line'><span style=\"color: #24292F\">✨  Done </span><span style=\"color: #CF222E\">in</span><span style=\"color: #24292F\"> 1.74s.</span></div></code></div></pre>\n<p>Make a commit! We have the beginnings of a test suite in place.</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">git add -A </span><span style=\"color: #0550AE\">.</span></div><div class='line'><span style=\"color: #24292F\">git commit -m </span><span style=\"color: #0A3069\">\"Testing with Jest is working\"</span></div></code></div></pre>\n<h2 id=\"api-surface-report--docs\" style=\"position:relative;\"><a href=\"#api-surface-report--docs\" aria-label=\"api surface report  docs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>API Surface Report &#x26; Docs</h2>\n<p>We’re going to use Microsoft’s <a href=\"https://api-extractor.com/\">api-extractor</a> as our\ndocumentation tool — but it’s really much more than that as we’ll see later</p>\n<p>First, let’s install it</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">yarn add -D @microsoft/api-extractor @microsoft/api-documenter</span></div></code></div></pre>\n<p>and let’s ask <code>api-extractor</code> to create a default config for us</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\"> yarn api-extractor init</span></div></code></div></pre>\n<p>This should result in a new file <code>/api-extractor.json</code> being created. Open it\nup and make the following changes</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #82071E\">--- a/api-extractor.json</span></div><div class='line'><span style=\"color: #116329\">+++ b/api-extractor.json</span></div><div class='line'><span style=\"color: #8250DF\">@@ -45,7 +45,7 @@</span></div><div class='line'><span style=\"color: #24292F\">    *</span></div><div class='line'><span style=\"color: #24292F\">    * SUPPORTED TOKENS: &lt;projectFolder&gt;, &lt;packageName&gt;, &lt;unscopedPackageName&gt;</span></div><div class='line'><span style=\"color: #24292F\">    */</span></div><div class='line'><span style=\"color: #82071E\">-  \"mainEntryPointFilePath\": \"&lt;projectFolder&gt;/lib/index.d.ts\",</span></div><div class='line'><span style=\"color: #116329\">+  \"mainEntryPointFilePath\": \"&lt;projectFolder&gt;/dist/index.d.ts\",</span></div><div class='line'></div><div class='line'><span style=\"color: #24292F\">   /**</span></div><div class='line'><span style=\"color: #24292F\">    * A list of NPM package names whose exports should be treated as part of this package.</span></div><div class='line'><span style=\"color: #8250DF\">@@ -181,7 +181,7 @@</span></div><div class='line'><span style=\"color: #24292F\">     /**</span></div><div class='line'><span style=\"color: #24292F\">      * (REQUIRED) Whether to generate the .d.ts rollup file.</span></div><div class='line'><span style=\"color: #24292F\">      */</span></div><div class='line'><span style=\"color: #82071E\">-    \"enabled\": true</span></div><div class='line'><span style=\"color: #116329\">+    \"enabled\": true,</span></div><div class='line'></div><div class='line'><span style=\"color: #24292F\">     /**</span></div><div class='line'><span style=\"color: #24292F\">      * Specifies the output path for a .d.ts rollup file to be generated without any trimming.</span></div><div class='line'><span style=\"color: #8250DF\">@@ -195,7 +195,7 @@</span></div><div class='line'><span style=\"color: #24292F\">      * SUPPORTED TOKENS: &lt;projectFolder&gt;, &lt;packageName&gt;, &lt;unscopedPackageName&gt;</span></div><div class='line'><span style=\"color: #24292F\">      * DEFAULT VALUE: \"&lt;projectFolder&gt;/dist/&lt;unscopedPackageName&gt;.d.ts\"</span></div><div class='line'><span style=\"color: #24292F\">      */</span></div><div class='line'><span style=\"color: #82071E\">-    // \"untrimmedFilePath\": \"&lt;projectFolder&gt;/dist/&lt;unscopedPackageName&gt;.d.ts\",</span></div><div class='line'><span style=\"color: #116329\">+    \"untrimmedFilePath\": \"&lt;projectFolder&gt;/dist/&lt;unscopedPackageName&gt;-private.d.ts\",</span></div><div class='line'></div><div class='line'><span style=\"color: #24292F\">     /**</span></div><div class='line'><span style=\"color: #24292F\">      * Specifies the output path for a .d.ts rollup file to be generated with trimming for a \"beta\" release.</span></div><div class='line'><span style=\"color: #8250DF\">@@ -207,7 +207,7 @@</span></div><div class='line'><span style=\"color: #24292F\">      * SUPPORTED TOKENS: &lt;projectFolder&gt;, &lt;packageName&gt;, &lt;unscopedPackageName&gt;</span></div><div class='line'><span style=\"color: #24292F\">      * DEFAULT VALUE: \"\"</span></div><div class='line'><span style=\"color: #24292F\">      */</span></div><div class='line'><span style=\"color: #82071E\">-    // \"betaTrimmedFilePath\": \"&lt;projectFolder&gt;/dist/&lt;unscopedPackageName&gt;-beta.d.ts\",</span></div><div class='line'><span style=\"color: #116329\">+    \"betaTrimmedFilePath\": \"&lt;projectFolder&gt;/dist/&lt;unscopedPackageName&gt;-beta.d.ts\",</span></div><div class='line'></div><div class='line'><span style=\"color: #24292F\">     /**</span></div><div class='line'><span style=\"color: #24292F\">      * Specifies the output path for a .d.ts rollup file to be generated with trimming for a \"public\" release.</span></div><div class='line'><span style=\"color: #8250DF\">@@ -221,7 +221,7 @@</span></div><div class='line'><span style=\"color: #24292F\">      * SUPPORTED TOKENS: &lt;projectFolder&gt;, &lt;packageName&gt;, &lt;unscopedPackageName&gt;</span></div><div class='line'><span style=\"color: #24292F\">      * DEFAULT VALUE: \"\"</span></div><div class='line'><span style=\"color: #24292F\">      */</span></div><div class='line'><span style=\"color: #82071E\">-    // \"publicTrimmedFilePath\": \"&lt;projectFolder&gt;/dist/&lt;unscopedPackageName&gt;-public.d.ts\",</span></div><div class='line'><span style=\"color: #116329\">+    \"publicTrimmedFilePath\": \"&lt;projectFolder&gt;/dist/&lt;unscopedPackageName&gt;-public.d.ts\"</span></div><div class='line'></div><div class='line'><span style=\"color: #24292F\">     /**</span></div><div class='line'><span style=\"color: #24292F\">      * When a declaration is trimmed, by default it will be replaced by a code comment such as</span></div></code></div></pre>\n<p>Make an empty <code>/etc</code> folder</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">mkdir etc</span></div></code></div></pre>\n<p>and then run api-extractor for the first time</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">yarn api-extractor run --local</span></div></code></div></pre>\n<p>This should result in a new file being created: <code>/etc/my-lib.api.md</code>. This is\nyour api-report. There’s also a <code>/temp</code> folder that will have been created. You\nshould add this to your <code>.gitignore</code>.</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #82071E\">--- a/.gitignore</span></div><div class='line'><span style=\"color: #116329\">+++ b/.gitignore</span></div><div class='line'><span style=\"color: #8250DF\">@@ -114,3 +114,5 @@</span><span style=\"color: #24292F\"> dist</span></div><div class='line'><span style=\"color: #24292F\"> .yarn/build-state.yml</span></div><div class='line'><span style=\"color: #24292F\"> .yarn/install-state.gz</span></div><div class='line'><span style=\"color: #24292F\"> .pnp.*</span></div><div class='line'><span style=\"color: #116329\">+</span></div><div class='line'><span style=\"color: #116329\">+# API Extractor working folder</span></div><div class='line'><span style=\"color: #116329\">+temp</span></div></code></div></pre>\n<p>you may also notice that some new <code>.d.ts</code> files are in your <code>/dist</code> folder.\nTake a look at the contents. Do you see anything interesting?</p>\n<h2 id=\"api-docs\" style=\"position:relative;\"><a href=\"#api-docs\" aria-label=\"api docs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>API Docs</h2>\n<p>We can use <code>api-documenter</code> to create markdown API docs by running</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">yarn api-documenter markdown -i temp -o docs</span></div></code></div></pre>\n<p>This should result in the creation of a <code>/docs</code> folder containing the markdown pages.</p>\n<p>Finally, we should make a couple of new npm scripts to help us easily\ngenerate new docs by running <code>api-extractor</code> and <code>api-documenter</code> sequentially</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #82071E\">--- a/package.json</span></div><div class='line'><span style=\"color: #116329\">+++ b/package.json</span></div><div class='line'><span style=\"color: #8250DF\">@@ -7,7 +7,10 @@</span></div><div class='line'><span style=\"color: #24292F\">     \"build\": \"tsc\",</span></div><div class='line'><span style=\"color: #24292F\">     \"watch\": \"yarn build --watch --preserveWatchOutput\",</span></div><div class='line'><span style=\"color: #24292F\">     \"lint\": \"eslint src tests --ext ts,js\",</span></div><div class='line'><span style=\"color: #82071E\">-    \"test\": \"jest\"</span></div><div class='line'><span style=\"color: #116329\">+    \"test\": \"jest\",</span></div><div class='line'><span style=\"color: #116329\">+    \"api-report\": \"api-extractor run\",</span></div><div class='line'><span style=\"color: #116329\">+    \"api-docs\": \"api-documenter markdown -i temp -o docs\",</span></div><div class='line'><span style=\"color: #116329\">+    \"build-with-docs\": \"yarn build && yarn api-report && yarn api-docs\"</span></div><div class='line'><span style=\"color: #24292F\">   },</span></div><div class='line'><span style=\"color: #24292F\">   \"license\": \"MIT\",</span></div><div class='line'><span style=\"color: #24292F\">   \"volta\": {</span></div></code></div></pre>\n<p>Make a commit so you have a clean workspace.</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">git commit -am </span><span style=\"color: #0A3069\">\"setup api-extractor and api-documenter\"</span></div></code></div></pre>\n<p>Make a commit! We have API extraction and a documentation generator in place.</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">git add -A </span><span style=\"color: #0550AE\">.</span></div><div class='line'><span style=\"color: #24292F\">git commit -m </span><span style=\"color: #0A3069\">\"API Extractor and API Documenter are working\"</span></div></code></div></pre>\n<h2 id=\"making-a-change-that-affects-our-api\" style=\"position:relative;\"><a href=\"#making-a-change-that-affects-our-api\" aria-label=\"making a change that affects our api permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Making a change that affects our API</h2>\n<p>Let’s “enhance” our library by supporting a fourth number in <code>sum3()</code></p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #82071E\">--- a/src/index.ts</span></div><div class='line'><span style=\"color: #116329\">+++ b/src/index.ts</span></div><div class='line'><span style=\"color: #8250DF\">@@ -21,11 +21,12 @@</span><span style=\"color: #24292F\"> export function avg(a: number, b: number, c: number): number {</span></div><div class='line'><span style=\"color: #24292F\">  * @param a - first number</span></div><div class='line'><span style=\"color: #24292F\">  * @param b - second number</span></div><div class='line'><span style=\"color: #24292F\">  * @param c - third number</span></div><div class='line'><span style=\"color: #116329\">+ * @param d - fourth number</span></div><div class='line'><span style=\"color: #24292F\">  *</span></div><div class='line'><span style=\"color: #24292F\">  * @beta</span></div><div class='line'><span style=\"color: #24292F\">  */</span></div><div class='line'><span style=\"color: #82071E\">-export function sum3(a: number, b: number, c: number): number {</span></div><div class='line'><span style=\"color: #82071E\">-  return sum2(a, sum2(b, c));</span></div><div class='line'><span style=\"color: #116329\">+export function sum3(a: number, b: number, c: number, d = 0): number {</span></div><div class='line'><span style=\"color: #116329\">+  return sum2(a, b) + sum2(c, d);</span></div><div class='line'><span style=\"color: #24292F\"> }</span></div></code></div></pre>\n<p>Now run</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">yarn build-with-docs</span></div></code></div></pre>\n<p>You should see something like</p>\n<blockquote>\n<p>Warning: You have changed the public API signature for this project. Please copy the file “temp/my-lib.api.md” to “etc/my-lib.api.md”, or perform a local build (which does this automatically). See the Git repo documentation for more info.</p>\n</blockquote>\n<p>This is <code>api-extractor</code> telling you that something that users can observe\nthrough the public API surface of this library has changed. We can follow its instructions\nto indicate that this was an <em>intentional change</em> (and probably a minor release instead of a patch)</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">cp temp/my-lib.api.md etc</span></div></code></div></pre>\n<p>and build the docs again</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">yarn build-with-docs</span></div></code></div></pre>\n<p>You should now see an updated api-report. It’s now very easy to see\nthe ramifications of changes to our API surface on a per-code-change basis!</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #0550AE\">diff --git a/etc/my-lib.api.md b/etc/my-lib.api.md</span></div><div class='line'><span style=\"color: #24292F\">index fc8ea25..82c4ac4 100644</span></div><div class='line'><span style=\"color: #82071E\">--- a/etc/my-lib.api.md</span></div><div class='line'><span style=\"color: #116329\">+++ b/etc/my-lib.api.md</span></div><div class='line'><span style=\"color: #8250DF\">@@ -8,7 +8,7 @@</span></div><div class='line'><span style=\"color: #24292F\"> export function avg(a: number, b: number, c: number): number;</span></div><div class='line'></div><div class='line'><span style=\"color: #24292F\"> // @beta</span></div><div class='line'><span style=\"color: #82071E\">-export function sum3(a: number, b: number, c: number): number;</span></div><div class='line'><span style=\"color: #116329\">+export function sum3(a: number, b: number, c: number, d?: number): number;</span></div></code></div></pre>\n<p>Our documentation has also been updated automatically</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #82071E\">--- a/docs/my-lib.md</span></div><div class='line'><span style=\"color: #116329\">+++ b/docs/my-lib.md</span></div><div class='line'><span style=\"color: #8250DF\">@@ -11,5 +11,5 @@</span><span style=\"color: #24292F\"> A small library for common math functions</span></div><div class='line'><span style=\"color: #24292F\"> |  Function | Description |</span></div><div class='line'><span style=\"color: #24292F\"> |  --- | --- |</span></div><div class='line'><span style=\"color: #24292F\"> |  [avg(a, b, c)](./my-lib.avg.md) | Calculate the average of three numbers |</span></div><div class='line'><span style=\"color: #82071E\">-|  [sum3(a, b, c)](./my-lib.sum3.md) | &lt;b&gt;&lt;i&gt;(BETA)&lt;/i&gt;&lt;/b&gt; Calculate the sum of three numbers |</span></div><div class='line'><span style=\"color: #116329\">+|  [sum3(a, b, c, d)](./my-lib.sum3.md) | &lt;b&gt;&lt;i&gt;(BETA)&lt;/i&gt;&lt;/b&gt; Calculate the sum of three numbers |</span></div><div class='line'></div><div class='line'><span style=\"color: #0550AE\">diff --git a/docs/my-lib.sum3.md b/docs/my-lib.sum3.md</span></div><div class='line'><span style=\"color: #24292F\">index 8ab69a1..4ca8888 100644</span></div><div class='line'><span style=\"color: #82071E\">--- a/docs/my-lib.sum3.md</span></div><div class='line'><span style=\"color: #116329\">+++ b/docs/my-lib.sum3.md</span></div><div class='line'><span style=\"color: #8250DF\">@@ -12,7 +12,7 @@</span><span style=\"color: #24292F\"> Calculate the sum of three numbers</span></div><div class='line'><span style=\"color: #24292F\"> &lt;b&gt;Signature:&lt;/b&gt;</span></div><div class='line'></div><div class='line'><span style=\"color: #24292F\"> ` ``typescript</span></div><div class='line'><span style=\"color: #82071E\">-export declare function sum3(a: number, b: number, c: number): number;</span></div><div class='line'><span style=\"color: #116329\">+export declare function sum3(a: number, b: number, c: number, d?: number): number;</span></div><div class='line'><span style=\"color: #24292F\"> ` ``</span></div><div class='line'></div><div class='line'><span style=\"color: #6E7781\">## Parameters</span></div><div class='line'></div><div class='line'><span style=\"color: #8250DF\">@@ -22,6 +22,7 @@</span><span style=\"color: #24292F\"> export declare function sum3(a: number, b: number, c: number): number;</span></div><div class='line'><span style=\"color: #24292F\"> | a | number | first number |</span></div><div class='line'><span style=\"color: #24292F\"> | b | number | second number |</span></div><div class='line'><span style=\"color: #24292F\"> | c | number | third number |</span></div><div class='line'><span style=\"color: #116329\">+| d | number | fourth number |</span></div><div class='line'></div><div class='line'><span style=\"color: #24292F\">&lt;b&gt;Returns:&lt;/b&gt;</span></div></code></div></pre>\n<p>Make a commit! We’ve introduced the first change to our library’s public API</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">git add -A </span><span style=\"color: #0550AE\">.</span></div><div class='line'><span style=\"color: #24292F\">git commit -m </span><span style=\"color: #0A3069\">\"Add fourth operand to `sum3` function\"</span></div></code></div></pre>\n<p>Congrats! we now have</p>\n<ul>\n<li>Compiling to JS</li>\n<li>Linting</li>\n<li>Tests</li>\n<li>Docs</li>\n<li>API surface change detection</li>\n</ul>\n<p>without having to reach for more complicated tools like webpack!</p>","tableOfContents":"<ul>\n<li><a href=\"#a-bare-bones-typescript-library-setup\">A “bare bones” TypeScript Library Setup</a></li>\n<li><a href=\"#getting-started\">Getting Started</a></li>\n<li><a href=\"#typescript-compiler\">TypeScript Compiler</a></li>\n<li><a href=\"#setting-up-your-tsconfig\">Setting up your tsconfig</a></li>\n<li>\n<p><a href=\"#linting\">Linting</a></p>\n<ul>\n<li><a href=\"#tsconfigeslintjson\"><code>/tsconfig.eslint.json</code></a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#testing\">Testing</a></p>\n<ul>\n<li><a href=\"#testsindextestts\"><code>tests/index.test.ts</code></a></li>\n<li><a href=\"#teststsconfigjson\"><code>tests/tsconfig.json</code></a></li>\n<li><a href=\"#babelrc\"><code>.babelrc</code></a></li>\n<li><a href=\"#take-it-for-a-spin\">Take it for a spin</a></li>\n</ul>\n</li>\n<li><a href=\"#api-surface-report--docs\">API Surface Report &#x26; Docs</a></li>\n<li><a href=\"#api-docs\">API Docs</a></li>\n<li><a href=\"#making-a-change-that-affects-our-api\">Making a change that affects our API</a></li>\n</ul>","fields":{"slug":"/course/enterprise-v2/02-ts-library-zero-to-one/"},"frontmatter":{"title":"TypeScript Libraries - Zero to One","course":"enterprise-v2","date":"June 10, 2021","description":"We'll discuss the goals and agenda of this course, and how to get up and\nrunning with the workshop project in 2 minutes or less.\n"}}},"pageContext":{"slug":"/course/enterprise-v2/02-ts-library-zero-to-one/","title":"TypeScript Libraries - Zero to One","course":"enterprise-v2","order":2,"previous":{"fields":{"slug":"/course/enterprise-v2/01-intro/"},"frontmatter":{"title":"Intro & Project Setup","order":1,"course":"enterprise-v2","isExercise":null}},"next":{"fields":{"slug":"/course/enterprise-v2/03-what-have-I-done/"},"frontmatter":{"title":"What have I done?","order":3,"course":"enterprise-v2","isExercise":null}}}},
    "staticQueryHashes": ["2785745750","2841359383"]}