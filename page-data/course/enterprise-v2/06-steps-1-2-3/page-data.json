{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/course/enterprise-v2/06-steps-1-2-3/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Learn TypeScript w/ Mike North","courses":[{"id":"fundamentals-v3","name":"TypeScript Fundamentals v3","summary":"Learn everything you need to know in order to confidently and successfully use TypeScript to build a modern JavaScript app."},{"id":"fundamentals-v4","name":"TypeScript Fundamentals v4","summary":"Learn everything you need to know in order to confidently and successfully use TypeScript to build a modern JavaScript app."},{"id":"intermediate-v1","name":"Intermediate TypeScript v1","summary":"Leverage TypeScript's strengths to provide clarity in the face of\ncomplexity, while protecting your codebase and team from it's weaknesses.\n"},{"id":"intermediate-v2","name":"Intermediate TypeScript v2","summary":"Leverage TypeScript's strengths to provide clarity in the face of\ncomplexity, while protecting your codebase and team from it's weaknesses.\n"},{"id":"making-typescript-stick","name":"Making TypeScript Stick","summary":"Tackle a series of challenges designed to reinforce your knowledge and make\nthe important concepts truly \"stick\" in your mind.\n"},{"id":"enterprise-v2","name":"Enterprise-Scale TypeScript v2","summary":"Combine TypeScript and GraphQL's type systems to create full-stack, fully\ntype-checked code bases that are shockingly easy to refactor and maintain.\n"},{"id":"full-stack-typescript","name":"Full Stack TypeScript","summary":"Combine TypeScript and GraphQL's type systems to create full-stack, fully\ntype-checked code bases that are shockingly easy to refactor and maintain.\n"}]}},"markdownRemark":{"id":"b618c72c-26a9-5e92-8fea-d3b8e20726dc","excerpt":"In this chapter, we’ll follow steps 1, 2 and 3 as described in the approach for converting large projects from JavaScript to TypeScript. Get TypeScript into…","html":"<p>In this chapter, we’ll follow steps 1, 2 and 3 as described in <a href=\"../05-converting-to-ts/#an-overview-of-the-approach\">the approach for converting large projects from JavaScript to TypeScript</a>.</p>\n<blockquote>\n<ol>\n<li><strong>Get TypeScript into your build toolchain</strong>, type-checking your existing <code>.js</code> files, in the most permissive mode possible</li>\n<li><strong>Rename some files from <code>.js</code> to <code>.ts</code></strong>, fixing only the things necessary to get the compile working</li>\n<li>\n<p><strong>Forbid implicit <code>any</code>s</strong>, replacing them throughout the codebase with <em>explicit <code>any</code>s</em>, <code>{}</code>s or more descriptive types</p>\n<ul>\n<li>Improve error handling by enabling <code>useUnknownInCatchVariables</code> in tsconfig</li>\n<li>Install community-supported types from <a href=\"https://github.com/DefinitelyTyped/DefinitelyTyped/\">DefinitelyTyped</a> where necessary</li>\n</ul>\n</li>\n</ol>\n</blockquote>\n<h2 id=\"getting-started-with-the-big-project\" style=\"position:relative;\"><a href=\"#getting-started-with-the-big-project\" aria-label=\"getting started with the big project permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Getting started with the big project</h2>\n<p>Let’s look back at our project git repo. We’ll be working a little bit with the <code>packages/chat-stdlib</code> library we created earlier, and the main chat app in <code>packages/chat</code>.</p>\n<p>From the root of the git repo, enter the folder</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #0550AE\">cd</span><span style=\"color: #24292F\"> packages/chat</span></div><div class='line'><span style=\"color: #24292F\">yarn dev</span></div></code></div></pre>\n<p>If this is your first time running the project, it may take a minute or two to build. Start the app up to make sure everything works properly. Look for the console output</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\"> Serving on http://localhost:3000</span></div></code></div></pre>\n<p>This is an indication that the UI should be viewable on <a href=\"http://localhost:3000\">http://localhost:3000</a></p>\n<p>You should see something like this</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 873px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8037e7dd98fc4388ea938d3c66921311/35751/app-home.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACNElEQVQ4y62SXWvaYBTHA4svYI1Gg1pt9JkvjcXVFYoOHBs61KobiF6uV7sbu15dZRf7FrIvsDCqsmqpsO1id/sEXk3xdr1wpfhEYU18zkhaWzoHtqMHfpwTkueXPyehQizLCkGb3+JkkcvhQBxnRxzHIafTiVwuF7Lb7chqtWpYLBatsyyLzEsmxDAMMplMyGw2311edpl4foWi3Iz5vXeFAYaznoRXA3h9XcA8z2OPx4O9Xh4zDINpmtbQ6XSYVqFprDcYsE6vxwaD4cRoNAJN33ml19EU5UP+j4GgAInEQ1IqlWB7+zmUy2XI5/OQy21BNpuFTCYD6XQaCoWC1hOJBOQKzyCTzUKxWCTqs5FIZDeZTFKUby0luteysNc8PCVEIb+Oj8loNNLAGJPJZDLHeDwmkiSpfSpJ0ul4PIZut1sBAIryC49FXkjBQeebDEDg59ERDIdDjdFoBAuKAICsDoPB4I0mXA0/Eu9F49A6+KzdkGUZCCHXRS1ZnXu93pnQJ6REFHoCrfYXTagoyuXrzw/O5rl450J1vhD6Q0nR50/BfvvrWUJFuZLib/FCoS/wQHT7YvCpNZ9w4QL/JQwIcTEYjsF++5aE0Y2YeH8jOtshkRWF3LCuCt0o/sHm2lQT/gaAqaIoU7XfAPUc9Pv9yky4x7m1HcJ//DYXH6vX61U1oc0R2lqy+t/uVt/tdDqHlXq9Xmk2m9em0WjstNvtaq1W29SEL15/p56+/EGpF7fBH6k/av9xFOVyAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"chat app home screen\"\n        title=\"chat app home screen\"\n        src=\"/static/8037e7dd98fc4388ea938d3c66921311/35751/app-home.png\"\n        srcset=\"/static/8037e7dd98fc4388ea938d3c66921311/63868/app-home.png 250w,\n/static/8037e7dd98fc4388ea938d3c66921311/0b533/app-home.png 500w,\n/static/8037e7dd98fc4388ea938d3c66921311/35751/app-home.png 873w\"\n        sizes=\"(max-width: 873px) 100vw, 873px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"type-checking-javascript\" style=\"position:relative;\"><a href=\"#type-checking-javascript\" aria-label=\"type checking javascript permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Type-checking JavaScript</h2>\n<p>To enable type-checking of JavaScript files, add the following line to the <code>compilerOptions</code> object in <code>packages/chat/tsconfig.json</code></p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">json</div><div class='code-container'><code><div class='line'><span style=\"color: #0A3069\">\"checkJs\"</span><span style=\"color: #24292F\">: </span><span style=\"color: #0550AE\">true</span><span style=\"color: #24292F\">,</span></div></code></div></pre>\n<p>This project uses <a href=\"https://parceljs.org/\"><code>parcel</code></a> to build and run the UI, which knows which parts of TypeScript syntax it can delete in order to arrive at JavaScript, but <strong>it performs no type-checking</strong>. To have TypeScript compile our project, you can run</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">yarn typecheck</span></div></code></div></pre>\n<p>You should see a couple of errors, all within the <code>src/</code> folder</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class='code-container'><code>Found 8 errors in 4 files.\n\nErrors  Files\n     1  src/index.js:8\n     1  src/ui/App.jsx:22\n     4  src/ui/components/Channel.jsx:19\n     2  src/utils/networking.js:40</code></div></pre><!-- Note from shiki-twoslash: the language pre was not set up for Shiki to use, and so there is no code highlighting -->\n<p>Go ahead and fix these. Some hints:</p>\n<p>This comment</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">js</div><div class='code-container'><code><div class='line'><span style=\"color: #6E7781\">/**</span></div><div class='line'><span style=\"color: #6E7781\"> * </span><span style=\"color: #CF222E\">@type</span><span style=\"color: #6E7781\"> </span><span style=\"color: #953800\">{React.FC&lt;React.PropsWithChildren&lt;any&gt;&gt;}</span><span style=\"color: #6E7781\"> param0 </span></div><div class='line'><span style=\"color: #6E7781\"> */</span></div></code></div></pre>\n<p>when added above any React function component will allow for an arbitrary props object, and a correctly-typed <code>children</code> property.</p>\n<p><code>React.useState()</code> defaults to a state type of <code>undefined</code>.</p>\n<pre class=\"shiki github-light twoslash lsp\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">js</div><div class='code-container'><code><div class='line'><span style=\"color: #CF222E\">const</span><span style=\"color: #24292F\"> [</span><span style=\"color: #0550AE\"><data-lsp lsp='const list: undefined' style='border-bottom: solid 2px lightgrey;'>list</data-lsp></span><span style=\"color: #24292F\">, </span><span style=\"color: #0550AE\"><data-lsp lsp='const setList: React.Dispatch&lt;React.SetStateAction&lt;undefined>>' >setList</data-lsp></span><span style=\"color: #24292F\">] </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> <data-lsp lsp='(alias) namespace React&#10;export namespace React' >React</data-lsp>.</span><span style=\"color: #8250DF\"><data-lsp lsp='function React.useState&lt;undefined>(): [undefined, React.Dispatch&lt;React.SetStateAction&lt;undefined>>] (+1 overload)' >useState</data-lsp></span><span style=\"color: #24292F\">()</span></div><div class='meta-line'><span class='popover-prefix'>        </span><span class='popover'><div class='arrow'></div>const list: undefined</span></div><div class='line'><span style=\"color: #CF222E\">if</span><span style=\"color: #24292F\"> (<data-lsp lsp='const list: undefined' >list</data-lsp>) <data-lsp lsp='const list: never' style='border-bottom: solid 2px lightgrey;'>list</data-lsp>.</span><span style=\"color: #0550AE\"><data-err><data-lsp lsp='any' >length</data-lsp></data-err></span></div><span class=\"error\"><span>Property 'length' does not exist on type 'never'.</span><span class=\"code\">2339</span></span><span class=\"error-behind\">Property 'length' does not exist on type 'never'.</span><div class='meta-line'><span class='popover-prefix'>           </span><span class='popover'><div class='arrow'></div>const list: never</span></div></code><a class='playground-link' href='https://www.typescriptlang.org/play/#code/PTAEAEGMAsFNINYCkDOAoEFYCdsHtsUAuUAJgGZyBODMcAFwE8AHWY0bWAQ0nrUjwA7FPVABtADYBLEQBpQKWPQAyM+gF1QAXlAAlbrwB0AV0UBlel3qwAFAEpaoJ84B6AfjRSAZqBvSRdqD+9IYSsIIA5vTQjs5xTu5AA'>Try</a></div></pre>\n<p> You can provide a type, by providing a default argument, <em>even if it has a possibility of being <code>null</code> or <code>undefined</code></em></p>\n<pre class=\"shiki github-light twoslash lsp\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">js</div><div class='code-container'><code><div class='line'><span style=\"color: #6E7781\">/**</span></div><div class='line'><span style=\"color: #6E7781\"> * </span><span style=\"color: #CF222E\">@type</span><span style=\"color: #6E7781\"> </span><span style=\"color: #953800\">{any[]}</span></div><div class='line'><span style=\"color: #6E7781\"> */</span></div><div class='line'><span style=\"color: #CF222E\">const</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\"><data-lsp lsp='const initialList: any[]' >initialList</data-lsp></span><span style=\"color: #24292F\"> </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> </span><span style=\"color: #0550AE\">null</span><span style=\"color: #24292F\">;</span></div><div class='line'><span style=\"color: #CF222E\">const</span><span style=\"color: #24292F\"> [</span><span style=\"color: #0550AE\"><data-lsp lsp='const list: any[]' style='border-bottom: solid 2px lightgrey;'>list</data-lsp></span><span style=\"color: #24292F\">, </span><span style=\"color: #0550AE\"><data-lsp lsp='const setList: React.Dispatch&lt;React.SetStateAction&lt;any[]>>' >setList</data-lsp></span><span style=\"color: #24292F\">] </span><span style=\"color: #CF222E\">=</span><span style=\"color: #24292F\"> <data-lsp lsp='(alias) namespace React&#10;export namespace React' >React</data-lsp>.</span><span style=\"color: #8250DF\"><data-lsp lsp='function React.useState&lt;any[]>(initialState: any[] | (() => any[])): [any[], React.Dispatch&lt;React.SetStateAction&lt;any[]>>] (+1 overload)' >useState</data-lsp></span><span style=\"color: #24292F\">(<data-lsp lsp='const initialList: any[]' >initialList</data-lsp>)</span></div><div class='meta-line'><span class='popover-prefix'>        </span><span class='popover'><div class='arrow'></div>const list: any[]</span></div><div class='line'><span style=\"color: #CF222E\">if</span><span style=\"color: #24292F\"> (<data-lsp lsp='const list: any[]' style='border-bottom: solid 2px lightgrey;'>list</data-lsp>) <data-lsp lsp='const list: any[]' style='border-bottom: solid 2px lightgrey;'>list</data-lsp>.</span><span style=\"color: #0550AE\"><data-lsp lsp='(property) Array&lt;any>.length: number' >length</data-lsp></span></div><div class='meta-line'><span class='popover-prefix'>     </span><span class='popover'><div class='arrow'></div>const list: any[]</span></div></code><a class='playground-link' href='https://www.typescriptlang.org/play/#code/PTAEAEBcE8AcFMDOAuUAneBDAxpAUMAFSF6iEQwKgDemAdtANoC6AvqYcHtgPZ2KRQASzpDIQzABsAMkIGgAvKDoBXSZIDc3PvMaS5kADShE8SLIHNFoAEpZcAOhWmAypEyR4AChFiJMgwBKAjBQMLCAPQB+PCEAM1AvfQFA0GTIB0l4OgBzSAALEPDiyKigA'>Try</a></div></pre>\n<h3 id=\"renaming-from-js-to-ts\" style=\"position:relative;\"><a href=\"#renaming-from-js-to-ts\" aria-label=\"renaming from js to ts permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Renaming from <code>.js</code> to <code>.ts</code></h3>\n<p>This can be a bit tedious to do without tools, so I’ve written a script for you to invoke from within the <code>packages/chat</code> folder.</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">node scripts/rename-to-ts.mjs</span></div></code></div></pre>\n<p>I recommend making a git commit immediately after the rename (but not necessarily a PR) so that <strong>git history is preserved</strong>. Sometimes git is not perfect at understanding a rename <em>in combination with other changes</em> in a single commit, and you end up with ultimately a deletion of the old file and an addition of a new one.</p>\n<p>and don’t forget to make this small change to <a href=\"/index.html\"><code>/index.html</code></a></p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #82071E\">--- a/index.html</span></div><div class='line'><span style=\"color: #116329\">+++ b/index.html</span></div><div class='line'><span style=\"color: #8250DF\">@@ -8,6 +8,6 @@</span></div><div class='line'><span style=\"color: #24292F\">   &lt;/head&gt;</span></div><div class='line'><span style=\"color: #24292F\">   &lt;body class=\"font-sans antialiased h-screen\"&gt;</span></div><div class='line'><span style=\"color: #24292F\">     &lt;div id=\"appContainer\" class=\"w-full h-full\"&gt;&lt;/div&gt;</span></div><div class='line'><span style=\"color: #82071E\">-    &lt;script src=\"src/index.js\" type=\"text/javascript\"&gt;&lt;/script&gt;</span></div><div class='line'><span style=\"color: #116329\">+    &lt;script src=\"src/index.ts\" type=\"text/javascript\"&gt;&lt;/script&gt;</span></div><div class='line'><span style=\"color: #24292F\">   &lt;/body&gt;</span></div><div class='line'><span style=\"color: #24292F\"> &lt;/html&gt;</span></div></code></div></pre>\n<p>Keep running</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292f\"><div class=\"language-id\">sh</div><div class='code-container'><code><div class='line'><span style=\"color: #24292F\">yarn typecheck </span><span style=\"color: #CF222E\">&&</span><span style=\"color: #24292F\"> yarn </span><span style=\"color: #0550AE\">test</span></div></code></div></pre>\n<p>and fixing small things until both commands pass</p>\n<h2 id=\"forbididng-implicit-anys\" style=\"position:relative;\"><a href=\"#forbididng-implicit-anys\" aria-label=\"forbididng implicit anys permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Forbididng implicit <code>any</code>s</h2>","tableOfContents":"<ul>\n<li><a href=\"#getting-started-with-the-big-project\">Getting started with the big project</a></li>\n<li>\n<p><a href=\"#type-checking-javascript\">Type-checking JavaScript</a></p>\n<ul>\n<li><a href=\"#renaming-from-js-to-ts\">Renaming from <code>.js</code> to <code>.ts</code></a></li>\n</ul>\n</li>\n<li><a href=\"#forbididng-implicit-anys\">Forbididng implicit <code>any</code>s</a></li>\n</ul>","fields":{"slug":"/course/enterprise-v2/06-steps-1-2-3/"},"frontmatter":{"title":"Steps 1, 2 and 3 - Adding our first types","course":"enterprise-v2","date":"October 27, 2023","description":"We'll discuss the goals and agenda of this course, and how to get up and\nrunning with the workshop project in 2 minutes or less.\n"}}},"pageContext":{"slug":"/course/enterprise-v2/06-steps-1-2-3/","title":"Steps 1, 2 and 3 - Adding our first types","course":"enterprise-v2","order":6,"previous":{"fields":{"slug":"/course/enterprise-v2/05-converting-to-ts/"},"frontmatter":{"title":"Converting to TypeScript","order":5,"course":"enterprise-v2","isExercise":null}},"next":{"fields":{"slug":"/course/enterprise-v2/07-dealing-with-pure-type-info/"},"frontmatter":{"title":"Step 4 - Dealing with Pure Type Information","order":7,"course":"enterprise-v2","isExercise":null}}}},
    "staticQueryHashes": ["2785745750","2841359383"]}