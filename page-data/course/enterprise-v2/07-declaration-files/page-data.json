{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/course/enterprise-v2/07-declaration-files/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Learn TypeScript w/ Mike North","courses":[{"id":"fundamentals-v3","name":"TypeScript Fundamentals v3","summary":"Learn everything you need to know in order to confidently and successfully use TypeScript to build a modern JavaScript app."},{"id":"fundamentals-v4","name":"TypeScript Fundamentals v4","summary":"Learn everything you need to know in order to confidently and successfully use TypeScript to build a modern JavaScript app."},{"id":"intermediate-v1","name":"Intermediate TypeScript v1","summary":"Leverage TypeScript's strengths to provide clarity in the face of\ncomplexity, while protecting your codebase and team from it's weaknesses.\n"},{"id":"intermediate-v2","name":"Intermediate TypeScript v2","summary":"Leverage TypeScript's strengths to provide clarity in the face of\ncomplexity, while protecting your codebase and team from it's weaknesses.\n"},{"id":"making-typescript-stick","name":"Making TypeScript Stick","summary":"Tackle a series of challenges designed to reinforce your knowledge and make\nthe important concepts truly \"stick\" in your mind.\n"},{"id":"enterprise-v2","name":"Enterprise-Scale TypeScript v2","summary":"Learn how to manage large TypeScript code bases with confidence and ease.\nIn this course, Mike shares his knowledge from years of experience working\nwith teams who maintain TypeScript projects with hundreds of regular full-time\ncontributors and 100K+ lines of code.\n"},{"id":"full-stack-typescript","name":"Full Stack TypeScript","summary":"Combine TypeScript and GraphQL's type systems to create full-stack, fully\ntype-checked code bases that are shockingly easy to refactor and maintain.\n"}]}},"markdownRemark":{"id":"8d7d558d-6127-5a7c-89dd-ecdf6b09b16e","excerpt":"Declaration Files & DefinitelyTyped What is a declaration file? If TypeScript is “JS with added type information”, these files are purely the type information…","html":"<h2 id=\"declaration-files--definitelytyped\" style=\"position:relative;\"><a href=\"#declaration-files--definitelytyped\" aria-label=\"declaration files  definitelytyped permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Declaration Files &#x26; DefinitelyTyped</h2>\n<h2 id=\"what-is-a-declaration-file\" style=\"position:relative;\"><a href=\"#what-is-a-declaration-file\" aria-label=\"what is a declaration file permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What is a declaration file?</h2>\n<p>If TypeScript is “JS with added type information”, these files are purely the type information made to layer on top of an existing JS file.\nWhy declaration files exist</p>\n<ul>\n<li>TS is a language that compiles to JavaScript — This is a critical driver of adoption</li>\n<li>…but it only provides value if type information comes along with dependencies</li>\n<li>You rarely, if ever end up consuming .ts code directly — it’ll nearly always be a declaration file and the matching JS source</li>\n</ul>\n<h2 id=\"when-i-might-find-myself-working-in-a-declaration-file\" style=\"position:relative;\"><a href=\"#when-i-might-find-myself-working-in-a-declaration-file\" aria-label=\"when i might find myself working in a declaration file permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>When I might find myself working in a declaration file</h2>\n<ul>\n<li>Overriding something broken in a DefinitelyTyped package</li>\n<li>Typing runtime features that may not be totally standard (i.e., chrome/safari-specific APIs, a piece of code that might run in a Node.js sandbox)</li>\n<li>Augmenting types with something more convenient (i.e., Object.keys returns a special string[])</li>\n</ul>\n<h2 id=\"how-is-it-different-from-a-regular-ts-file\" style=\"position:relative;\"><a href=\"#how-is-it-different-from-a-regular-ts-file\" aria-label=\"how is it different from a regular ts file permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How is it different from a regular .ts file?</h2>\n<ul>\n<li>\n<p>You’re limited in terms of what you can put here</p>\n<ul>\n<li>No values, although it can contain things that typically would have a value aspect to them</li>\n<li>initializers can only be string/numeric/enum literals</li>\n<li>No statements, only expressions</li>\n<li>Nothing reassignable (i.e., <code>let</code>)</li>\n</ul>\n</li>\n<li>Source <code>.d.ts</code> files completely disappear as part of the compile process</li>\n<li>\n<p>You used to only be able to create ones from TypeScript source, but as of TS 3.7 you can now create them from <code>.js</code> as well</p>\n<ul>\n<li>These usually are just a starting point and need some significant manual touch up</li>\n</ul>\n</li>\n<li>They’re code. You need tests (we’ll talk about this later)</li>\n<li>\n<p><strong>Manually created .d.ts:</strong> they can become misaligned with the JS code they aim to describe</p>\n<ul>\n<li>TypeScript’s type-checking is done exclusively using type information</li>\n<li>This can create a situation where everything looks great</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"definitelytyped\" style=\"position:relative;\"><a href=\"#definitelytyped\" aria-label=\"definitelytyped permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DefinitelyTyped</h2>\n<p><strong>A giant place for shared ambient type packages</strong>\nOver 6k libraries are typed here</p>\n<p><strong>Publishes packages of the form <code>@types/*</code></strong>\ni.e., @types/react, @types/lodash</p>\n<p><strong>Community-run</strong>\nPeople may list themselves as “owners” of certain types by adding their names to types/&#x3C;package_name>/index.d.ts</p>\n<p>When new PRs come in that touch files in the folder for these types, you get mentioned by a bot and asked to perform a code review within a few (7) days.</p>\n<ul>\n<li>If an owner “requests changes” in their review, you proceed with normal code review norms</li>\n<li>As soon as any owner gives an approving review, the code is eligible for automated merge/publish</li>\n<li>If nobody reviews the PR, the code gets merged anyway</li>\n</ul>\n<p>PRs from owners themselves are merged almost immediately</p>\n<h3 id=\"definitely-challenges\" style=\"position:relative;\"><a href=\"#definitely-challenges\" aria-label=\"definitely challenges permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Definitely Challenges</h3>\n<p>There’s no mechanism (other than asking submitters to not do it) for maintainers to keep “ownership” in the same sense as “some authors can commit to React.js and some cannot”</p>\n<p>Maintainers have very little control over version numbers. They can only have a stream of types associated with each major version of the library being typed — if they fix a bug in <code>@types/foo 3.4.5</code> and have already released <code>3.5.0</code>, there’s no way to release a <code>3.4.6</code>.</p>\n<h3 id=\"versioning-challenges\" style=\"position:relative;\"><a href=\"#versioning-challenges\" aria-label=\"versioning challenges permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Versioning Challenges</h3>\n<p>On the issue of versioning, there’s an additional challenge.</p>\n<p>SemVer instructs us to use x.y.z version numbers as follows</p>\n<ul>\n<li><strong>Major</strong> - Incremented “when you make incompatible API changes”</li>\n<li><strong>Minor</strong> - Incremented “when you add functionality in a backwards compatible manner”</li>\n<li><strong>Patch</strong> - Incremented “when you make backwards compatible bug fixes”</li>\n</ul>\n<p>This way, particularly for a consumer of a lib, we know how much risk we’re exposing ourselves to when bumping from version A to B.</p>\n<p>Things get way more complicated when dealing with types</p>\n<ul>\n<li><strong>Lib Major, Minor, Patch</strong> - Which version of the library is being typed</li>\n<li><strong>TypeMajor</strong> - Incremented for breaking changes to types (i.e., dropping a compiler version</li>\n<li><strong>TypeMinor</strong> - Incremented for non-breaking functionality improvements to types</li>\n<li><strong>TypePatch</strong> - Incremented for “backwards compatible bug fixes” to types</li>\n</ul>\n<p>So we have 6 pieces of information here.</p>\n<p>We can reduce this to 5 if we’re willing to consider “backwards compatible bug fixes” to be “a similar thing” in users’ eyes, regardless of whether they happen in “values” or “types”.</p>\n<p>We can make other tough compromises (i.e., “we always track latest minor”) and get this to 4, but this will already either limit the kinds of changes that can be made</p>\n<h2 id=\"type-acquisition\" style=\"position:relative;\"><a href=\"#type-acquisition\" aria-label=\"type acquisition permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Type Acquisition</h2>\n<p><code>--traceResolution</code> to log out extra information</p>\n<p><strong>Prioritization based on file type</strong>\n.ts > .tsx > .js+.d.ts</p>\n<h3 id=\"prioritization-based-on-type-of-location\" style=\"position:relative;\"><a href=\"#prioritization-based-on-type-of-location\" aria-label=\"prioritization based on type of location permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prioritization based on type of location</h3>\n<ul>\n<li>tsconfig.json paths: {}</li>\n<li>“Type roots”</li>\n<li>Explicit module declarations</li>\n<li>@types/*</li>\n</ul>\n<h3 id=\"prioritization-based-on-location\" style=\"position:relative;\"><a href=\"#prioritization-based-on-location\" aria-label=\"prioritization based on location permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prioritization based on location</h3>\n<p>Same as Node’s require.resolve algorithm, as long as moduleResolution: “Node”</p>\n<h2 id=\"yarns-typescript-plugin\" style=\"position:relative;\"><a href=\"#yarns-typescript-plugin\" aria-label=\"yarns typescript plugin permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Yarn’s TypeScript Plugin</h2>\n<p>Yarn’s <a href=\"https://github.com/yarnpkg/berry/tree/master/packages/plugin-typescript\">typescript plugin</a> automatically installs the <code>@types/*</code> packages when appropriate. For example, if we ran <code>yarn add -D react-dom@1.2.3</code>, it would also implicity install <code>@types/react-dom@1.2.3</code></p>","tableOfContents":"<ul>\n<li><a href=\"#declaration-files--definitelytyped\">Declaration Files &#x26; DefinitelyTyped</a></li>\n<li><a href=\"#what-is-a-declaration-file\">What is a declaration file?</a></li>\n<li><a href=\"#when-i-might-find-myself-working-in-a-declaration-file\">When I might find myself working in a declaration file</a></li>\n<li><a href=\"#how-is-it-different-from-a-regular-ts-file\">How is it different from a regular .ts file?</a></li>\n<li>\n<p><a href=\"#definitelytyped\">DefinitelyTyped</a></p>\n<ul>\n<li><a href=\"#definitely-challenges\">Definitely Challenges</a></li>\n<li><a href=\"#versioning-challenges\">Versioning Challenges</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#type-acquisition\">Type Acquisition</a></p>\n<ul>\n<li><a href=\"#prioritization-based-on-type-of-location\">Prioritization based on type of location</a></li>\n<li><a href=\"#prioritization-based-on-location\">Prioritization based on location</a></li>\n</ul>\n</li>\n<li><a href=\"#yarns-typescript-plugin\">Yarn’s TypeScript Plugin</a></li>\n</ul>","fields":{"slug":"/course/enterprise-v2/07-declaration-files/"},"frontmatter":{"title":"Declaration Files","course":"enterprise-v2","date":"October 27, 2023","description":"TypeScript's .d.ts declaration files, overlay type info on JS files. DefinitelyTyped, a community-driven repository, hosts over 6,000 type declarations. Challenges arise with versioning, but tools like Yarn's TypeScript Plugin ease the process.\n"}}},"pageContext":{"slug":"/course/enterprise-v2/07-declaration-files/","title":"Declaration Files","course":"enterprise-v2","order":7,"previous":{"fields":{"slug":"/course/enterprise-v2/06-steps-1-2-3/"},"frontmatter":{"title":"Steps 1, 2 and 3 - Adding our first types","order":6,"course":"enterprise-v2","isExercise":null}},"next":{"fields":{"slug":"/course/enterprise-v2/08-dealing-with-pure-type-info/"},"frontmatter":{"title":"Step 4 - Dealing with Pure Type Information","order":8,"course":"enterprise-v2","isExercise":null}}}},
    "staticQueryHashes": ["2785745750","2841359383"]}